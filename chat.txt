
âœ  npm_yuangs
âœ  npm_yuangs git:(main)
âœ  npm_yuangs git:(main) yuangs

ğŸ¨ è‹‘å¹¿å±±çš„ä¸ªäººåº”ç”¨å¯åŠ¨å™¨ (Modular TSç‰ˆ)

å½“å‰ç‰ˆæœ¬: 3.47.0
Usage: yuangs [options] [command] [command]

è‹‘å¹¿å±±çš„ä¸ªäººå‘½ä»¤è¡Œå·¥å…·

Arguments:
  command                           è‡ªå®šä¹‰åº”ç”¨å‘½ä»¤

Options:
  -V, --version                     output the version number
  -h, --help                        display help for command

Commands:
  ai [options] [question...]        å‘ AI æé—®
  list                              åˆ—å‡ºæ‰€æœ‰åº”ç”¨
  history [options]                 æŸ¥çœ‹åŠæ‰§è¡Œå‘½ä»¤å†å²
  macros                            æŸ¥çœ‹æ‰€æœ‰å¿«æ·æŒ‡ä»¤
  save [options] <name>             ä¿å­˜å¿«æ·æŒ‡ä»¤
  run <name>                        æ‰§è¡Œå¿«æ·æŒ‡ä»¤
  completion [shell]                ç”Ÿæˆå¹¶å®‰è£… Shell è¡¥å…¨è„šæœ¬
  _complete [options]               (internal) unified completion entry
  capabilities                      Capability system commands (new architecture)
  registry [action] [id] [version]  Macro Registry ç®¡ç†å‘½ä»¤
  explain [id]                      Explain an execution (use "last" for most recent)
  replay [options] <id>             Replay an execution
  skills                            Skill management commands
  preferences                       Manage AI interaction preferences
  config                            ç®¡ç†æœ¬åœ°é…ç½® (~/.yuangs.json)
  help                              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  shici                             æ‰“å¼€å¤è¯—è¯ PWA
  dict                              æ‰“å¼€è‹±è¯­è¯å…¸
  pong                              æ‰“å¼€ Pong æ¸¸æˆ
âœ  npm_yuangs git:(main) yuangs  ai

ğŸ¤– è¿›å…¥ AI äº¤äº’æ¨¡å¼ (è¾“å…¥ exit é€€å‡º)

ğŸ“¦ å·²æ¢å¤ 162 æ¡ä¸Šä¸‹æ–‡

ä½ ï¼š:clear
ğŸ§¹ ä¸Šä¸‹æ–‡å·²æ¸…ç©ºï¼ˆå«æŒä¹…åŒ–ï¼‰

ä½ ï¼š@A

[å¤„ç†é”™è¯¯]: ENOENT: no such file or directory, open '/home/ubuntu/npm_yuangs/A'

ä½ ï¼š@API_DOCUMENTATION.md
âœ… å·²åŠ å…¥æ–‡ä»¶ä¸Šä¸‹æ–‡: API_DOCUMENTATION.md

ä½ ï¼šæ ¹æ®æˆ‘çš„é¡¹ç›®ç»“æ„ï¼Œå¸®æˆ‘è§„åˆ’å®ç°ä¸€ä¸ªssh ç»ˆç«¯å·¥å…·ï¼šå°†ç°æœ‰çš„**yuangsé¡¹ç›®ä¸SSHå·¥å…·**ï¼ˆç±»ä¼¼ Terminusï¼‰è¿›è¡Œæ•´åˆï¼Œæ•´ä½“å·¥ä½œé‡æ˜¯æ¯”è¾ƒ
å¤§çš„ï¼Œæ¶‰åŠå¤šä¸ªæ–¹é¢çš„å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚æ ¹æ®åŠŸèƒ½æ¨¡å—çš„å¤æ‚æ€§ï¼Œè¿™é‡Œåˆ—å‡ºäº†ä¸»è¦å·¥ä½œé‡çš„ä¼°è®¡ï¼Œä»¥åŠæ¯ä¸ªæ¨¡å—çš„å…·ä½“ä»»åŠ¡ã€‚

1. åŸºç¡€æ¶æ„å’Œæ¨¡å—é›†æˆ
        â€¢       ä»»åŠ¡ï¼š
        â€¢       è®¾è®¡å¹¶å®ç°SSHè¿æ¥å’Œå‘½ä»¤æ‰§è¡Œæ¨¡å—ã€‚
>       â€¢       å°†yuangsçš„æ ¸å¿ƒæ¨¡å—ï¼ˆå¦‚æ²»ç†ã€AIå¢å¼ºã€ä¸Šä¸‹æ–‡ç®¡ç†ï¼‰ä¸SSHå·¥å…·é›†æˆã€‚
>       â€¢       å·¥ä½œé‡ï¼šä¸­ç­‰ã€‚è™½ç„¶yuangså·²ç»æœ‰æˆç†Ÿçš„æ ¸å¿ƒæ¨¡å—ï¼Œä½†é›†æˆåˆ°SSHå·¥å…·ä¸­ï¼Œæ¶‰åŠåˆ°è°ƒæ•´ç°æœ‰ç»“æ„å’Œæ¥å£ï¼Œç¡®ä¿ç³»ç»Ÿå…¼å®¹ã€‚

2. AIé©±åŠ¨çš„å‘½ä»¤åˆ†æä¸æ‰§è¡Œå»ºè®®
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       å¼€å‘å‘½ä»¤è¾“å…¥åˆ†ææ¨¡å—ï¼Œç»“åˆAIä¸Šä¸‹æ–‡ç®¡ç†ï¼Œä¸ºç”¨æˆ·è¾“å…¥æä¾›è‡ªåŠ¨åŒ–çš„å‘½ä»¤å»ºè®®æˆ–è¡¥å…¨ã€‚
>       â€¢       å°†AIå¢å¼ºçš„ä»»åŠ¡æ‰§è¡ŒåŠŸèƒ½ä¸SSHå·¥å…·ç»“åˆï¼Œæ™ºèƒ½åŒ–åˆ†æå’Œä¼˜åŒ–å‘½ä»¤ã€‚
>       â€¢       å·¥ä½œé‡ï¼šå¤§ã€‚è¿™éƒ¨åˆ†éœ€è¦åœ¨yuangsçš„AIå¼•æ“åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ï¼Œç¡®ä¿å…¶èƒ½åˆ†æå¹¶ä¼˜åŒ–SSHå‘½ä»¤çš„æ‰§è¡Œã€‚è¿™åŒ…æ‹¬è®­ç»ƒAIæ¨¡å‹ã€è°ƒæ•´
ä¸Šä¸‹æ–‡ç®¡ç†ç­‰ã€‚

3. æ²»ç†ä¸å®‰å…¨å®¡è®¡åŠŸèƒ½
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       å®ç°å‘½ä»¤æ‰§è¡Œçš„å¤šå±‚æ²»ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬WASMéªŒè¯ã€é€»è¾‘å±‚éªŒè¯ã€äººå·¥ç¡®è®¤ç­‰ã€‚
>       â€¢       é›†æˆGovernanceServiceï¼Œç¡®ä¿æ¯ä¸ªæ‰§è¡Œçš„å‘½ä»¤éƒ½ç»è¿‡æ²»ç†å®¡è®¡ã€‚
>       â€¢       å·¥ä½œé‡ï¼šå¤§ã€‚è¿™éƒ¨åˆ†éœ€è¦æ·±å…¥æ•´åˆyuangsçš„æ²»ç†æ¨¡å—ï¼Œå°¤å…¶æ˜¯ç¡®ä¿æ²»ç†æœºåˆ¶å¯ä»¥å…¼å®¹å’Œæ­£ç¡®å¤„ç†SSHå‘½ä»¤ï¼Œè®¾è®¡å¹¶å®ç°å¤šä¸ªå±‚
æ¬¡çš„å®‰å…¨æ§åˆ¶ã€‚

4. ä¸Šä¸‹æ–‡ç®¡ç†ä¸æŠ€èƒ½å­¦ä¹ 
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       è®¾è®¡å¹¶å®ç°ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿï¼Œç¡®ä¿SSHå‘½ä»¤æ‰§è¡Œæ—¶èƒ½æ­£ç¡®ä¿å­˜å’ŒåŠ è½½ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚å†å²å‘½ä»¤ã€æ–‡ä»¶è·¯å¾„ç­‰ï¼‰ã€‚
>       â€¢       å°†æŠ€èƒ½å­¦ä¹ æ¨¡å—ä¸SSHä»»åŠ¡æ‰§è¡Œç»“åˆï¼Œè®©ç³»ç»Ÿèƒ½è‡ªåŠ¨å­¦ä¹ å¹¶ä¼˜åŒ–æ‰§è¡Œæ¨¡å¼ã€‚
>       â€¢       å·¥ä½œé‡ï¼šä¸­ç­‰ã€‚ä¸Šä¸‹æ–‡ç®¡ç†å’ŒæŠ€èƒ½å­¦ä¹ æ˜¯yuangsä¸­å·²æœ‰çš„æ¨¡å—ï¼Œä½†éœ€è¦è°ƒæ•´ä»¥é€‚åº”SSHå·¥å…·çš„ç‰¹å®šåœºæ™¯ã€‚

5. æ•°æ®åº“ä¸æŒä¹…åŒ–
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       è®¾è®¡å¹¶å®ç°SQLiteæ•°æ®åº“ç”¨äºæŒä¹…åŒ–å­˜å‚¨æ‰§è¡Œå†å²ã€ä¸Šä¸‹æ–‡å’ŒæŠ€èƒ½æ•°æ®ã€‚
>       â€¢       ç¡®ä¿ç³»ç»Ÿèƒ½è·¨ä¼šè¯æŒä¹…åŒ–æ•°æ®ï¼Œå¹¶ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ã€‚
>       â€¢       å·¥ä½œé‡ï¼šä¸­ç­‰ã€‚æ•°æ®åº“è®¾è®¡å’Œé›†æˆæ˜¯ä¸€ä¸ªä¸­ç­‰éš¾åº¦çš„ä»»åŠ¡ï¼Œæ¶‰åŠæ•°æ®å­˜å‚¨ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰ã€‚

6. ç”¨æˆ·ç•Œé¢ï¼ˆCLIäº¤äº’ä¸å‘½ä»¤è¡Œï¼‰
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       è®¾è®¡å¹¶å®ç°CLIç•Œé¢ï¼Œæ”¯æŒå‘½ä»¤è¾“å…¥ã€å»ºè®®ã€æ‰§è¡Œã€åé¦ˆå±•ç¤ºã€‚
>       â€¢       ä½¿ç”¨Commander.jsï¼ˆNode.jsï¼‰æˆ–ç±»ä¼¼å·¥å…·å®ç°å‘½ä»¤è¡Œäº¤äº’ã€‚
>       â€¢       å·¥ä½œé‡ï¼šä¸­ç­‰ã€‚CLIç•Œé¢çš„è®¾è®¡å¹¶ä¸å¤æ‚ï¼Œä½†éœ€è¦ç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿæµç•…åœ°ä¸ç³»ç»Ÿäº¤äº’ï¼Œå¹¶è·å¾—å®æ—¶åé¦ˆã€‚

7. æµ‹è¯•ä¸ä¼˜åŒ–
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       è¿›è¡Œç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œç¡®ä¿å„ä¸ªæ¨¡å—çš„ååŒå·¥ä½œï¼Œç‰¹åˆ«æ˜¯æ²»ç†ã€å®‰å…¨ã€AIä»»åŠ¡è§„åˆ’ç­‰é«˜çº§åŠŸèƒ½ã€‚
>       â€¢       æ€§èƒ½ä¼˜åŒ–ï¼Œç¡®ä¿åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹ç³»ç»Ÿç¨³å®šã€‚
>       â€¢       å·¥ä½œé‡ï¼šå¤§ã€‚é›†æˆæµ‹è¯•å’Œæ€§èƒ½ä¼˜åŒ–æ˜¯å¿…è¦çš„æ­¥éª¤ï¼Œç‰¹åˆ«æ˜¯è¦ç¡®ä¿é«˜å¤æ‚åº¦ä»»åŠ¡çš„ç¨³å®šæ€§å’Œå“åº”é€Ÿåº¦ã€‚

8. éƒ¨ç½²ä¸å‘å¸ƒ
        â€¢       ä»»åŠ¡ï¼š
>       â€¢       å°†å¼€å‘å®Œæˆçš„å·¥å…·æ‰“åŒ…å¹¶å‘å¸ƒï¼Œæä¾›å®‰è£…åŒ…æˆ–å¯æ‰§è¡Œæ–‡ä»¶ã€‚
        â€¢       é…ç½®æ–‡æ¡£è¯´æ˜ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ã€‚
>       â€¢       å·¥ä½œé‡ï¼šä¸­ç­‰ã€‚å‘å¸ƒå’Œé…ç½®æ–‡æ¡£çš„å·¥ä½œé‡ä¸å¤§ï¼Œä½†éœ€è¦ç¡®ä¿å·¥å…·æ˜“äºå®‰è£…å’Œä½¿ç”¨ã€‚

â¸»

æ€»å·¥ä½œé‡è¯„ä¼°ï¼š
        â€¢       æ€»ä½“ï¼šæ•´ä½“å·¥ä½œé‡å±äºä¸­ç­‰åå¤§ã€‚
>       â€¢       æ—¶é—´é¢„ä¼°ï¼šæ ¹æ®æ¯ä¸ªæ¨¡å—çš„å¤æ‚åº¦ï¼Œæ•´ä½“å¼€å‘å‘¨æœŸå¯èƒ½éœ€è¦2-6ä¸ªæœˆï¼Œè¿™å–å†³äºå›¢é˜Ÿè§„æ¨¡ã€èµ„æºæŠ•å…¥ä»¥åŠåŠŸèƒ½çš„å…·ä½“å¤æ‚åº¦ã€‚
>       â€¢       ç®€å•åŠŸèƒ½ï¼ˆå¦‚SSHè¿æ¥ã€åŸºç¡€å‘½ä»¤æ‰§è¡Œï¼‰ï¼š1-2ä¸ªæœˆã€‚
>       â€¢       å¤æ‚åŠŸèƒ½ï¼ˆå¦‚AIå¢å¼ºã€æ²»ç†å®¡è®¡ã€æŠ€èƒ½å­¦ä¹ ç­‰ï¼‰ï¼š3-4ä¸ªæœˆã€‚
        â€¢       æµ‹è¯•ä¸ä¼˜åŒ–ï¼š1ä¸ªæœˆã€‚

å›¢é˜Ÿåä½œä¸èµ„æºè¦æ±‚ï¼š
>       â€¢       å¦‚æœä½ æœ‰ä¸€ä¸ªå¼€å‘å›¢é˜Ÿï¼Œæ¨èåˆ†é…ç»™æ¯ä¸ªæ¨¡å—çš„è´Ÿè´£äººï¼Œç¡®ä¿æ¯ä¸ªéƒ¨åˆ†èƒ½å¤Ÿå¹¶è¡Œå¼€å‘å’Œæµ‹è¯•ã€‚
>       â€¢       å›¢é˜Ÿå¯èƒ½åŒ…æ‹¬ï¼šåç«¯å¼€å‘äººå‘˜ï¼ˆAIå’Œæ²»ç†æ¨¡å—é›†æˆï¼‰ã€å‰ç«¯å¼€å‘äººå‘˜ï¼ˆCLIäº¤äº’è®¾è®¡ï¼‰ã€æ•°æ®åº“å·¥ç¨‹å¸ˆã€æµ‹è¯•äººå‘˜ã€‚

â¸»

ç»“è®ºï¼š

> æ•´åˆ**yuangsä¸SSHå·¥å…·**çš„å·¥ä½œé‡è¾ƒå¤§ï¼Œæ¶‰åŠAIã€æ²»ç†ã€å®‰å…¨ã€ä»»åŠ¡è§„åˆ’ç­‰å¤šä¸ªå¤æ‚æ¨¡å—çš„é›†æˆå’Œå¼€å‘ã€‚å¦‚æœä½ èƒ½å¤Ÿåˆç†åˆ†é…èµ„æºã€æ¸…æ™°è§„
åˆ’å¼€å‘æµç¨‹ï¼Œå¹¶è¿›è¡Œæ¨¡å—åŒ–å¼€å‘å’Œ
 ğŸ¤– AI  ä¸‹é¢æˆ‘åŸºäºä½ ç°æœ‰çš„ yuangs æ¶æ„ï¼Œç»™ä½ ä¸€ä»½å·¥ç¨‹çº§ã€å¯è½åœ°çš„ SSH ç»ˆç«¯æ•´åˆè§„åˆ’ã€‚ç›®æ ‡ä¸æ˜¯â€œåšä¸€ä¸ª Terminusâ€ï¼Œè€Œæ˜¯åšä¸€ä¸ªâ€œAI-go
verned SSH Workspaceâ€ï¼Œè¿™æ˜¯ yuangs çš„å·®å¼‚åŒ–ä¼˜åŠ¿ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸€ã€æ€»ä½“ç›®æ ‡å®šä¹‰ï¼ˆéå¸¸å…³é”®ï¼‰

> yuangs + SSH â‰  æ™®é€š SSH å®¢æˆ·ç«¯
yuangs + SSH = å¯æ²»ç†ã€å¯è§£é‡Šã€å¯é‡æ”¾ã€å¯å­¦ä¹ çš„è¿œç¨‹æ‰§è¡Œç¯å¢ƒ

æ ¸å¿ƒå®šä½ï¼š

  â€¢ âœ… å¤šä¸»æœº SSH ç»ˆç«¯
  â€¢ âœ… AI è¾…åŠ©å‘½ä»¤ / è‡ªåŠ¨åŒ–
  â€¢ âœ… æ‰€æœ‰è¿œç¨‹æ‰§è¡Œéƒ½èµ° Governance / ExecutionRecord
  â€¢ âœ… SSH ä¼šè¯ = ä¸€ç­‰ä¸Šä¸‹æ–‡ï¼ˆContextItemï¼‰
  â€¢ âœ… æ”¯æŒ replay / explain / skills å­¦ä¹ 

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äºŒã€æ€»ä½“æ¶æ„æ¼”è¿›å›¾ï¼ˆæ¨èï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚          UI Layer (Terminal / Web)        â”‚
â”‚ â”‚   - xterm.js / Ink / TUI / WebView        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚          SSH Session Layer                â”‚
â”‚ â”‚   - SSHManager                            â”‚
â”‚ â”‚   - Session Multiplexing                 â”‚
â”‚ â”‚   - PTY / Resize / Stream                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚        yuangs Execution Bridge            â”‚
â”‚ â”‚   - SSHToolExecutor                      â”‚
â”‚ â”‚   - RemoteShellAdapter                   â”‚
â”‚ â”‚   - Governance + Causal Lock              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚        Agent / Governance / Skills        â”‚
â”‚ â”‚   - AgentRuntime                         â”‚
â”‚ â”‚   - ExecutionRecord / Replay             â”‚
â”‚ â”‚   - Skills / Policy                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸‰ã€æ¨¡å—æ‹†è§£ & å·¥ä½œé‡è¯„ä¼°ï¼ˆé‡ç‚¹ï¼‰

ä¸‹é¢æˆ‘ç”¨ ã€Œæ¨¡å—ç›®æ ‡ â†’ å­ä»»åŠ¡ â†’ ä»£ç è½ç‚¹ â†’ å·¥ä½œé‡ã€ çš„æ–¹å¼ç»™ä½ æ‹†ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 1ï¼šSSH æ ¸å¿ƒèƒ½åŠ›ï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰

### ğŸ¯ ç›®æ ‡

æä¾›ç¨³å®šã€å¯å¤ç”¨ã€å¯å¹¶å‘çš„ SSH ä¼šè¯èƒ½åŠ›

### å­ä»»åŠ¡

  â€¢ SSH è¿æ¥ç®¡ç†ï¼ˆhost / user / key / passwordï¼‰
  â€¢ å¤š Session å¹¶å‘
  â€¢ PTY æ”¯æŒï¼ˆäº¤äº’å¼ shellï¼‰
  â€¢ Resize / stdin / stdout / stderr
  â€¢ Keepalive / reconnect
  â€¢ ä¼šè¯çŠ¶æ€æœºï¼ˆconnecting / ready / closedï¼‰

### æ¨èæŠ€æœ¯

  â€¢  ssh2  +  node-pty
  â€¢ æˆ–  ssh2  åŸç”Ÿ  shell({ term, rows, cols })

### ä»£ç è½ç‚¹å»ºè®®

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/ssh/
â”‚  â”œâ”€ SSHClient.ts
â”‚  â”œâ”€ SSHSession.ts
â”‚  â”œâ”€ SSHManager.ts
â”‚  â””â”€ types.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡è¯„ä¼°

â± 5â€“7 äººæ—¥

> âš ï¸ è¿™æ˜¯â€œåœ°åŸºâ€ï¼Œä¸€å®šè¦å†™å¾—å¹²å‡€ã€æ—  AI é€»è¾‘

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 2ï¼šyuangs æ‰§è¡Œæ¡¥æ¥ï¼ˆæ ¸å¿ƒå·®å¼‚ï¼‰

### ğŸ¯ ç›®æ ‡

è®© è¿œç¨‹å‘½ä»¤ = yuangs çš„ shell_cmd

### å…³é”®è®¾è®¡

æ–°å¢ä¸€ä¸ª Action ç±»å‹ï¼š

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ type: 'ssh_shell_cmd'
â”‚ payload: {
â”‚   sessionId: string
â”‚   command: string
â”‚ }
â”‚ riskLevel: 'low' | 'medium' | 'high'
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å­ä»»åŠ¡

  â€¢ SSHToolExecutor
  â€¢ æ¥å…¥ GovernanceService
  â€¢ æ¥å…¥ Causal Lock
  â€¢ è¾“å‡ºå˜æˆ Observation
  â€¢ ExecutionRecord è®°å½• host / user / cwd

### ä»£ç è½ç‚¹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/executor/
â”‚  â”œâ”€ SSHExecutor.ts
â”‚  â””â”€ index.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡

â± 3â€“4 äººæ—¥

âœ… è¿™æ˜¯ yuangs ä¸ Terminus çš„æœ¬è´¨åˆ†æ°´å²­

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 3ï¼šSSH Session ä½œä¸º Contextï¼ˆéå¸¸é‡è¦ï¼‰

### ğŸ¯ ç›®æ ‡

SSH ä¼šè¯æ˜¯ AI çš„ä¸€ç­‰å…¬æ°‘

### è®¾è®¡

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ ContextItem {
â”‚   source: 'ssh'
â”‚   path: 'ssh://user@host'
â”‚   content: {
â”‚     lastCommand,
â”‚     lastOutput,
â”‚     cwd,
â”‚     envSummary
â”‚   }
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å­ä»»åŠ¡

  â€¢ æ¯æ¬¡æ‰§è¡Œå†™ Observation
  â€¢ SmartContextManager æ”¯æŒ ssh source
  â€¢ å¯  :ls  /  :cat  æŸ¥çœ‹ SSH ä¸Šä¸‹æ–‡

### å·¥ä½œé‡

â± 2â€“3 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 4ï¼šCLI / UI å±‚ï¼ˆTerminalï¼‰

### é€‰é¡¹ Aï¼šCLI å†…åµŒï¼ˆå¿«ï¼‰

  â€¢  yuangs ssh user@host
  â€¢ ç›´æ¥è¿›å…¥äº¤äº’
  â€¢  Ctrl+A  â†’ AI æ¨¡å¼

### é€‰é¡¹ Bï¼šWeb / Electronï¼ˆé•¿çº¿ï¼‰

  â€¢ xterm.js
  â€¢ å¤š tab
  â€¢ ç±» Terminus UI

### å­ä»»åŠ¡ï¼ˆCLIï¼‰

  â€¢ readline + raw mode
  â€¢ PTY resize
  â€¢ å‘½ä»¤æ¨¡å¼åˆ‡æ¢ï¼ˆ :ai ,  :exec ï¼‰

### å·¥ä½œé‡

  â€¢ CLI ç‰ˆï¼š3â€“4 äººæ—¥
  â€¢ GUI ç‰ˆï¼š10â€“15 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 5ï¼šAI è¾…åŠ© & Skills å­¦ä¹ ï¼ˆé«˜ä»·å€¼ï¼‰

### ğŸ¯ ç›®æ ‡

è®© AI æˆä¸º è¿œç¨‹è¿ç»´å‰¯é©¾é©¶

### ç¤ºä¾‹èƒ½åŠ›

  â€¢ â€œè¿™ä¸ªé”™è¯¯æ€ä¹ˆä¿®ï¼Ÿâ€
  â€¢ â€œåœ¨è¿™å°æœºå™¨ä¸Šéƒ¨ç½²æœåŠ¡â€
  â€¢ â€œå›æ»šåˆšæ‰çš„æ“ä½œâ€

### æŠ€æœ¯ç‚¹

  â€¢ SSH è¾“å‡º â†’ Observation
  â€¢ æˆåŠŸè¿œç¨‹æ“ä½œ â†’ learnSkillFromRecord
  â€¢ Skill å¸¦  environment: ssh

### å·¥ä½œé‡

â± 2â€“3 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 6ï¼šå®‰å…¨ & æ²»ç†å¼ºåŒ–ï¼ˆä½ çš„å¼ºé¡¹ï¼‰

### å¿…é¡»åš

  â€¢ SSH å‘½ä»¤é»˜è®¤  medium  é£é™©
  â€¢  rm ,  iptables ,  useradd  â†’ high
  â€¢ replay é»˜è®¤  --dry
  â€¢ explain æ˜¾ç¤ºï¼šè¿œç¨‹ä¸»æœº + å‘½ä»¤

### å·¥ä½œé‡

â± 1â€“2 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ¨¡å— 7ï¼šæµ‹è¯• & å‘å¸ƒ

### æµ‹è¯•

  â€¢ mock ssh server
  â€¢ replay ssh execution
  â€¢ æ–­çº¿æ¢å¤æµ‹è¯•

### å‘å¸ƒ

  â€¢ ssh config import
  â€¢ ~/.ssh/config è§£æ
  â€¢ å¯†é’¥æƒé™æ ¡éªŒ

### å·¥ä½œé‡

â± 2â€“3 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# å››ã€æ•´ä½“å·¥ä½œé‡æ±‡æ€»ï¼ˆç°å®ä¼°ç®—ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å—           â”‚ äººæ—¥        â”‚
â”‚ SSH Core       â”‚ 6           â”‚
â”‚ yuangs Bridge  â”‚ 4           â”‚
â”‚ Context é›†æˆ   â”‚ 3           â”‚
â”‚ CLI Terminal   â”‚ 4           â”‚
â”‚ AI + Skills    â”‚ 3           â”‚
â”‚ Governance     â”‚ 2           â”‚
â”‚ Test & Release â”‚ 3           â”‚
â”‚ åˆè®¡           â”‚ 25 äººæ—¥å·¦å³ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ‘‰ ä¸€ä¸ªèµ„æ·±å·¥ç¨‹å¸ˆï¼š4â€“6 å‘¨
ğŸ‘‰ ä¸¤äººå¹¶è¡Œï¼š2â€“3 å‘¨

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äº”ã€æ¨èå®æ–½è·¯çº¿ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰

### Phase 1ï¼ˆ2 å‘¨ï¼‰âœ… MVP

  â€¢ CLI SSH
  â€¢ Governance + ExecutionRecord
  â€¢ AI è§£é‡Šè¿œç¨‹é”™è¯¯

### Phase 2ï¼ˆ2 å‘¨ï¼‰

  â€¢ å¤š Session
  â€¢ Skills å­¦ä¹ 
  â€¢ replay / explain

### Phase 3ï¼ˆé•¿æœŸï¼‰

  â€¢ Web UI
  â€¢ å›¢é˜Ÿåä½œ
  â€¢ å®¡è®¡ç³»ç»Ÿ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# å…­ã€å…³é”®åˆ¤æ–­ï¼ˆè¯´ä¸€å¥æå¿ƒçªå­çš„ï¼‰

> âŒ ä¸è¦å…ˆåš UI
âœ… å…ˆæŠŠ SSH å˜æˆ yuangs çš„ä¸€ç­‰æ‰§è¡Œå¯¹è±¡

ä½ ç°åœ¨çš„æ¶æ„ï¼š

  â€¢ Governance âœ…
  â€¢ Causal Lock âœ…
  â€¢ Replay âœ…
  â€¢ Skills âœ…

è¿™åœ¨ SSH å·¥å…·é¢†åŸŸæ˜¯ç¢¾å‹çº§ä¼˜åŠ¿ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š

  â€¢ âœ… ç”» SSHExecutor.ts çš„ä»£ç éª¨æ¶
  â€¢ âœ… è®¾è®¡  ssh_shell_cmd  Action Schema
  â€¢ âœ… ç»™ä¸€ä»½ Phase 1 çš„ä»»åŠ¡æ‹†åˆ† Jira åˆ—è¡¨

ä½ é€‰ä¸€ä¸ªï¼Œæˆ‘ç»§ç»­å¾€ä¸‹æ¨è¿›ã€‚

ä½ ï¼š  â€¢ âœ… ç”» SSHExecutor.ts çš„ä»£ç éª¨æ¶  â€¢ âœ… è®¾è®¡  ssh_shell_cmd  Action Schema  â€¢ âœ… ç»™ä¸€ä»½ Phase 1 çš„ä»»åŠ¡æ‹†åˆ† Jira åˆ—è¡¨
 ğŸ¤– AI  ä¸‹é¢æˆ‘ä¸¥æ ¼åŸºäºä½ ç°æœ‰çš„ yuangs æ¶æ„ä¸æ²»ç†æ¨¡å‹ï¼Œç»™ä½ ä¸€ä»½å·¥ç¨‹çº§ã€å¯ç›´æ¥è½åœ°çš„è®¾è®¡æ–¹æ¡ˆï¼Œåˆ†ä¸‰éƒ¨åˆ†å®Œæˆä½ ç‚¹åçš„ä¸‰é¡¹å†…å®¹ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# âœ… 1.  SSHExecutor.ts  ä»£ç éª¨æ¶ï¼ˆå¯¹é½ ToolExecutor / Governance / Causal Lockï¼‰

> ç›®æ ‡ï¼šSSH â‰  shell exec çš„ç‰¹ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ª å—æ²»ç†çš„è¿œç¨‹æ‰§è¡Œå™¨

ğŸ“ æ¨èä½ç½®

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/executor/SSHExecutor.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… æ ¸å¿ƒè®¾è®¡åŸåˆ™

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸåˆ™                     â”‚ è¯´æ˜                              â”‚
â”‚ âœ… å’Œ ShellExecutor åŒçº§ â”‚ SSH æ˜¯ä¸€ç§ transportï¼Œä¸æ˜¯ bypass â”‚
â”‚ âœ… å¼ºåˆ¶ Action Schema    â”‚ ä¸å…è®¸â€œè£¸å­—ç¬¦ä¸²â€æ‰§è¡Œ              â”‚
â”‚ âœ… æ”¯æŒæµå¼ stdout       â”‚ é€‚é… REPL / AI streaming          â”‚
â”‚ âœ… è®°å½• Observation      â”‚ æ”¯æŒ Causal Lock                  â”‚
â”‚ âœ… Governance aware      â”‚ é£é™© = high by default            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… SSHExecutor.tsï¼ˆéª¨æ¶ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ import { Client, ConnectConfig } from 'ssh2';
â”‚ import { GovernanceDecision } from '../agent/governance';
â”‚ import { ContextManager } from '../agent/contextManager';
â”‚
â”‚ export interface SSHCommandResult {
â”‚   stdout: string;
â”‚   stderr: string;
â”‚   exitCode: number | null;
â”‚ }
â”‚
â”‚ export interface SSHExecutorOptions {
â”‚   timeoutMs?: number;
â”‚   cwd?: string;
â”‚   env?: Record<string, string>;
â”‚ }
â”‚
â”‚ export class SSHExecutor {
â”‚   private client: Client;
â”‚   private context: ContextManager;
â”‚
â”‚   constructor(context: ContextManager) {
â”‚     this.client = new Client();
â”‚     this.context = context;
â”‚   }
â”‚
â”‚   /**
â”‚    * æ‰§è¡Œ SSH shell command
â”‚    * âš ï¸ å‰ç½®æ¡ä»¶ï¼šGovernance å·² approve
â”‚    */
â”‚   async execute(
â”‚     action: SSHShellCmdAction,
â”‚     onStdout?: (chunk: string) => void,
â”‚     onStderr?: (chunk: string) => void,
â”‚   ): Promise<SSHCommandResult> {
â”‚
â”‚     const {
â”‚       host,
â”‚       port,
â”‚       username,
â”‚       auth,
â”‚       command,
â”‚       options,
â”‚     } = action.payload;
â”‚
â”‚     const connConfig: ConnectConfig = {
â”‚       host,
â”‚       port: port ?? 22,
â”‚       username,
â”‚       ...this.resolveAuth(auth),
â”‚       readyTimeout: options?.timeoutMs ?? 20000,
â”‚     };
â”‚
â”‚     return new Promise((resolve, reject) => {
â”‚       let stdout = '';
â”‚       let stderr = '';
â”‚       let exitCode: number | null = null;
â”‚
â”‚       this.client
â”‚         .on('ready', () => {
â”‚           this.client.exec(command, { cwd: options?.cwd }, (err, stream) => {
â”‚             if (err) return reject(err);
â”‚
â”‚             stream
â”‚               .on('close', (code: number) => {
â”‚                 exitCode = code;
â”‚                 this.client.end();
â”‚
â”‚                 // âœ… Observation for Causal Lock
â”‚                 this.context.addObservation(
â”‚                   `SSH command executed on ${host}: exit=${code}`,
â”‚                   'tool_result',
â”‚                   action.id,
â”‚                 );
â”‚
â”‚                 resolve({ stdout, stderr, exitCode });
â”‚               })
â”‚               .on('data', (data: Buffer) => {
â”‚                 const chunk = data.toString();
â”‚                 stdout += chunk;
â”‚                 onStdout?.(chunk);
â”‚               });
â”‚
â”‚             stream.stderr.on('data', (data: Buffer) => {
â”‚               const chunk = data.toString();
â”‚               stderr += chunk;
â”‚               onStderr?.(chunk);
â”‚             });
â”‚           });
â”‚         })
â”‚         .on('error', reject)
â”‚         .connect(connConfig);
â”‚     });
â”‚   }
â”‚
â”‚   private resolveAuth(auth: SSHAuth) {
â”‚     if (auth.type === 'password') {
â”‚       return { password: auth.password };
â”‚     }
â”‚     if (auth.type === 'privateKey') {
â”‚       return {
â”‚         privateKey: auth.privateKey,
â”‚         passphrase: auth.passphrase,
â”‚       };
â”‚     }
â”‚     throw new Error(`Unsupported SSH auth type: ${auth.type}`);
â”‚   }
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# âœ… 2.  ssh_shell_cmd  Action Schemaï¼ˆæ²»ç† & å®¡è®¡ä¼˜å…ˆï¼‰

ğŸ“ æ¨èä½ç½®

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/agent/actions/ssh_shell_cmd.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… Action å®šä¹‰ï¼ˆå’Œ shell_cmd å¯¹ç§°ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ export interface SSHShellCmdAction extends ProposedAction {
â”‚   type: 'ssh_shell_cmd';
â”‚   riskLevel: 'high'; // âœ… å¼ºåˆ¶ high
â”‚   payload: {
â”‚     host: string;
â”‚     port?: number;
â”‚
â”‚     username: string;
â”‚
â”‚     auth: SSHAuth;
â”‚
â”‚     command: string;
â”‚
â”‚     options?: {
â”‚       cwd?: string;
â”‚       timeoutMs?: number;
â”‚       env?: Record<string, string>;
â”‚     };
â”‚
â”‚     metadata?: {
â”‚       purpose?: string;
â”‚       ticket?: string;
â”‚       environment?: 'prod' | 'staging' | 'dev';
â”‚     };
â”‚   };
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… SSHAuth

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ export type SSHAuth =
â”‚   | {
â”‚       type: 'password';
â”‚       password: string;
â”‚     }
â”‚   | {
â”‚       type: 'privateKey';
â”‚       privateKey: string;   // PEM
â”‚       passphrase?: string;
â”‚     };
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… Governance è§„åˆ™ç¤ºä¾‹ï¼ˆpolicy.yamlï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ - id: ssh-prod-protection
â”‚   effect: deny
â”‚   reason: SSH to prod requires explicit approval
â”‚   actions: [ssh_shell_cmd]
â”‚   conditions:
â”‚     payload.metadata.environment: prod
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… é£é™©æŠ«éœ²ç¤ºä¾‹ï¼ˆCLIï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ âš ï¸  High Risk Remote Operation
â”‚
â”‚ Target: root@10.0.1.5
â”‚ Command: systemctl restart nginx
â”‚ Environment: prod
â”‚
â”‚ Impact:
â”‚   ğŸ–¥ Remote system state mutation
â”‚   ğŸŒ Potential service downtime
â”‚   ğŸ”’ Executed outside local audit scope
â”‚
â”‚ Confirm execution? (yes/no)
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# âœ… 3. Phase 1 Jira ä»»åŠ¡æ‹†åˆ†ï¼ˆå·¥ç¨‹å¯æ§ç‰ˆï¼‰

> ğŸ¯ Phase 1 ç›®æ ‡ï¼šâ€œå¯å®‰å…¨æ‰§è¡Œä¸€æ¬¡ SSH å‘½ä»¤â€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… EPICï¼šSSH Remote Execution (Phase 1)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-01

Define SSH Action Schema

å†…å®¹

  â€¢ å®šä¹‰  ssh_shell_cmd
  â€¢ å¼ºåˆ¶  riskLevel = high
  â€¢ æ”¯æŒ metadataï¼ˆenv / purposeï¼‰

éªŒæ”¶

  â€¢ Action å¯è¢« Governance è¯†åˆ«
  â€¢ explain / replay å¯åºåˆ—åŒ–

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-02

Implement SSHExecutor

å†…å®¹

  â€¢ åŸºäº  ssh2
  â€¢ stdout/stderr streaming
  â€¢ timeout æ”¯æŒ

éªŒæ”¶

  â€¢ å¯æ‰§è¡Œ  echo hello
  â€¢ æ­£ç¡®è¿”å› exitCode

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-03

Integrate with ToolExecutor

å†…å®¹

  â€¢ ToolExecutor.dispatch æ”¯æŒ ssh_shell_cmd
  â€¢ ä¸ shell_cmd åˆ†æ”¯å¹¶åˆ—

éªŒæ”¶

  â€¢ AgentRuntime å¯è°ƒç”¨ SSHExecutor

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-04

Governance Integration

å†…å®¹

  â€¢ SSH é»˜è®¤ high-risk
  â€¢ policy.yaml å¢åŠ  ssh è§„åˆ™
  â€¢ äººå·¥ç¡®è®¤æµç¨‹å¤ç”¨

éªŒæ”¶

  â€¢ æœªç¡®è®¤ â†’ deny
  â€¢ ç¡®è®¤ â†’ execute

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-05

Causal Lock Support

å†…å®¹

  â€¢ SSH æ‰§è¡Œç»“æœå†™å…¥ Observation
  â€¢ ACK æ ¡éªŒå¯é€šè¿‡

éªŒæ”¶

  â€¢ ACK mismatch ä¼šè§¦å‘ CAUSAL BREAK

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ğŸ« YUANGS-SSH-06

ExecutionRecord & Replay

å†…å®¹

  â€¢ ExecutionRecord ä¿å­˜ host / command
  â€¢ replay --dry ä¸çœŸå®è¿æ¥

éªŒæ”¶

  â€¢ explain å¯æ˜¾ç¤º SSH è¯¦æƒ…
  â€¢ replay compatible å¯å¤ç”¨å½“å‰ key

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## âœ… Phase 1 å·¥ä½œé‡è¯„ä¼°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å—            â”‚ äººæ—¥   â”‚
â”‚ Action Schema   â”‚ 0.5    â”‚
â”‚ SSHExecutor     â”‚ 2      â”‚
â”‚ Governance      â”‚ 1      â”‚
â”‚ ToolExecutor    â”‚ 0.5    â”‚
â”‚ Record / Replay â”‚ 1      â”‚
â”‚ æµ‹è¯• & ä¿®å¤     â”‚ 1      â”‚
â”‚ æ€»è®¡            â”‚ 6 äººæ—¥ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# âœ… æœ€é‡è¦çš„ä¸€å¥è¯ï¼ˆæ¶æ„å±‚ï¼‰

> ä½ ä¸æ˜¯åœ¨â€œåŠ  SSH åŠŸèƒ½â€ï¼Œä½ æ˜¯åœ¨æŠŠ yuangs ä»â€œæœ¬åœ° AI Shellâ€å‡çº§ä¸º
ä¸€ä¸ªâ€œAI-governed Remote Ops Runtimeâ€ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

å¦‚æœä½ ä¸‹ä¸€æ­¥æƒ³åšï¼Œæˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š

  â€¢ âœ… Phase 2ï¼ˆå¤šä¼šè¯ / jump host / bastionï¼‰
  â€¢ âœ… SSH ä¼šè¯å˜æˆâ€œå¯äº¤äº’ AI Terminalâ€
  â€¢ âœ… SSH Skill å­¦ä¹ ï¼ˆéƒ¨ç½² / å·¡æ£€ / æ’éšœï¼‰
  â€¢ âœ… å¯¹æ¥ Web UIï¼ˆTerminus-styleï¼‰

åªè¦ä½ ä¸€å¥ï¼šã€Œç»§ç»­ Phase 2ã€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 33.10s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼š
  â€¢ âœ… Phase 2ï¼ˆå¤šä¼šè¯ / jump host / bastionï¼‰
  â€¢ âœ… SSAI æ¨¡å¼å¯åŠ¨ (ç©ºè¡Œè§¦å‘)...

â ™ AI æ­£åœ¨æ€è€ƒ...H ä¼šè¯å˜æˆâ€œå¯äº¤äº’ AI Terminalâ€
  â€¢ âœ… SSH Skill å­¦ä¹ ï¼ˆéƒ¨ç½² / å·¡æ£€ / æ’éšœï¼‰
  â€¢ âœ… å¯¹æ¥ Web UIï¼ˆTerminus-styleï¼‰
 ğŸ¤– AI  ä½ å¥½ ğŸ‘‹
æˆ‘å·²ç»å®Œæ•´ç†è§£äº†ä½ æä¾›çš„ yuangs CLI é¡¹ç›®ä¸Šä¸‹æ–‡ä¸æ¶æ„è®¾è®¡ï¼ˆåŒ…æ‹¬ AgentRuntimeã€æ²»ç†æœºåˆ¶ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€æŠ€èƒ½ç³»ç»Ÿã€Replay/Explain ç­‰
ï¼‰ã€‚

ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åŸºäºè¿™äº›æ—¢æœ‰è®¾è®¡è¿›è¡Œæ·±å…¥å¯¹è¯å’Œè®¾è®¡å·¥ä½œï¼Œä¾‹å¦‚ï¼š

ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ–¹å‘ç»§ç»­ğŸ‘‡

  â€¢ æ¶æ„è®¾è®¡
  â€¢ åŠŸèƒ½è§„åˆ’
  â€¢ å®ç°çº§è®¨è®ºï¼ˆåå·¥ç¨‹ï¼‰
  â€¢ æ²»ç†ä¸å®‰å…¨è®¾è®¡ï¼ˆyuangs çš„å¼ºé¡¹ï¼‰
  â€¢ æ¸è¿›å¼è½åœ°è®¡åˆ’

ä½ å¯ä»¥ç›´æ¥å‘Šè¯‰æˆ‘ä¸€å¥è¯ï¼Œæ¯”å¦‚ï¼š

> â€œæˆ‘ä»¬å…ˆä»æŠŠ SSH å½“æˆä¸€ç§æ–°çš„ ToolExecutor è®¾è®¡å¼€å§‹â€

æˆ–è€…

> â€œå¸®æˆ‘å®Œæ•´è§„åˆ’ yuangs + SSHï¼ˆç±»ä¼¼ Terminusï¼‰çš„æŠ€æœ¯è·¯çº¿å’Œå·¥ä½œé‡â€

æˆ‘ä¼šä¸¥æ ¼åŸºäºä½ ç°æœ‰çš„ yuangs è®¾è®¡å“²å­¦ç»§ç»­æ¨è¿›ï¼Œä¸ä¼šâ€œæ¨å€’é‡æ¥â€ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 14.37s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼šâ€œå¸®æˆ‘å®Œæ•´è§„åˆ’ yuangs + SSHï¼ˆç±»ä¼¼ Terminusï¼‰çš„æŠ€æœ¯è·¯çº¿å’Œå·¥ä½œé‡â€

âš ï¸  Governance: Explicit approval required for shell_cmd
ğŸ’» Proposed Command: systemctl restart nginx

============================================================
ğŸŸ¡ é£é™©å‘ŠçŸ¥ä¹¦ [é£é™©ç­‰çº§: ä¸­é£é™© (50/100)]
============================================================

ğŸ“‹ æ“ä½œæè¿°
å³å°†æ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œã€‚ æ­¤æ“ä½œé£é™©ç­‰çº§ä¸ºã€ä¸­ã€‘ï¼Œè¯·ä»”ç»†æ£€æŸ¥æ“ä½œå†…å®¹ã€‚

âš ï¸  æ½œåœ¨é—®é¢˜
   â€¢ å¯èƒ½å¯¼è‡´ä¸å¯é¢„æœŸçš„å‰¯ä½œç”¨

ğŸ’¡ æ¨èè¡ŒåŠ¨
   ä»”ç»†å®¡æŸ¥å‘½ä»¤å‚æ•°
   ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®
   è€ƒè™‘åˆ›å»ºç³»ç»Ÿå¿«ç…§

============================================================


âš ï¸  Do you want to proceed with this action? (y/N) yy

[EXECUTING] âš™ï¸ shell_cmd...
[SUCCESS] Result:


--- Turn 2 ---
 ğŸ¤– AI  å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜éå¸¸æ¸…æ™°ï¼Œè€Œä¸”ä½ ç°æœ‰çš„ yuangs æ¶æ„ï¼Œå®é™…ä¸Šéå¸¸é€‚åˆâ€œè¿›åŒ–â€ä¸ºä¸€ä¸ª AI + SSH çš„ä¸‹ä¸€ä»£ç»ˆç«¯ç³»ç»Ÿã€‚ä¸‹é¢æˆ‘ä¼šä¸¥æ ¼åŸº
äºä½ ç»™å‡ºçš„ yuangs æ¶æ„ï¼Œç»™ä½ ä¸€ä»½å®Œæ•´ã€å·¥ç¨‹çº§ã€å¯è½åœ°çš„æŠ€æœ¯è·¯çº¿ + å·¥ä½œé‡è¯„ä¼°ï¼Œè€Œä¸æ˜¯æ³›æ³›è€Œè°ˆã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸€ã€æ€»ä½“ç›®æ ‡å®šä¹‰ï¼ˆå…ˆå¯¹é½æ„¿æ™¯ï¼‰

### ä½ è¦åšçš„ä¸æ˜¯ã€Œå†åšä¸€ä¸ª Terminusã€

è€Œæ˜¯ï¼š

> ä¸€ä¸ªâ€œæœ‰æ²»ç†ã€æœ‰å®¡è®¡ã€æœ‰å› æœé”å®šçš„ AI-augmented SSH Terminalâ€

å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼š

> yuangs = æœ¬åœ° Shell çš„ AgentRuntimeyuangs-ssh = è¿œç¨‹ Shell çš„ AgentRuntime

SSH åªæ˜¯ Execution Backend çš„ä¸€ç§ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äºŒã€æ€»ä½“æ¶æ„æ¼”è¿›å›¾ï¼ˆæ ¸å¿ƒç»“è®ºï¼‰

åœ¨ä¸æ¨ç¿» yuangs ç°æœ‰è®¾è®¡å“²å­¦çš„å‰æä¸‹ï¼Œæ¨èæ¶æ„å¦‚ä¸‹ï¼š

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚              UI Layer (å¯é€‰)               â”‚
â”‚ â”‚  - CLI (çº¯ç»ˆç«¯)                            â”‚
â”‚ â”‚  - TUI (Ink / Blessed / xterm.js)          â”‚
â”‚ â”‚  - Web UI (Terminus-like)                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚          SSH Session Manager                 â”‚
â”‚ â”‚  - å¤šä¼šè¯                                     â”‚
â”‚ â”‚  - è¿æ¥æ±                                      â”‚
â”‚ â”‚  - Session Context                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚          AgentRuntime (å¤ç”¨) âœ…              â”‚
â”‚ â”‚  - Planner / Executor                       â”‚
â”‚ â”‚  - Governance                               â”‚
â”‚ â”‚  - Causal Lock                              â”‚
â”‚ â”‚  - Skills                                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚     Execution Backend (æŠ½è±¡å±‚)               â”‚
â”‚ â”‚  - LocalShellExecutor (å·²æœ‰) âœ…              â”‚
â”‚ â”‚  - SSHShellExecutor (æ–°å¢) ğŸš€                â”‚
â”‚ â”‚  - DockerExecutorï¼ˆæœªæ¥ï¼‰                   â”‚
â”‚ â”‚  - K8sExecutorï¼ˆæœªæ¥ï¼‰                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… AgentRuntime / Governance / Skills / Replay å…¨éƒ¨å¤ç”¨
ğŸš€ æ–°å¢çš„åªæœ‰ SSH æ‰§è¡Œç»´åº¦

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸‰ã€æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ˆéå¸¸å…³é”®ï¼‰

### 1ï¸âƒ£ SSH â‰  UIï¼Œè€Œæ˜¯ Execution Backend

ä½ ä¸è¦ä»ã€Œåšä¸€ä¸ªç»ˆç«¯ UIã€å¼€å§‹ï¼Œè€Œæ˜¯ï¼š

> å…ˆæŠŠ SSH å˜æˆ yuangs çš„â€œå¯æ²»ç†æ‰§è¡Œå™¨â€

UI æ˜¯åé¢çš„äº‹ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### 2ï¸âƒ£ SSH Session æ˜¯â€œæœ‰ä¸Šä¸‹æ–‡çš„å¯¹è±¡â€

æ¯ä¸ª SSH ä¼šè¯åº”è¯¥æ˜¯ï¼š

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ interface SSHSessionContext {
â”‚   sessionId: string;
â”‚   host: string;
â”‚   user: string;
â”‚   cwd: string;
â”‚   env: Record<string, string>;
â”‚   lastOutput?: string;
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… å¯ä»¥ç›´æ¥ä½œä¸º ContextManager çš„ Observation Source

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### 3ï¸âƒ£ SSH å‘½ä»¤ = é«˜é£é™©æ“ä½œï¼ˆé»˜è®¤ï¼‰

ä½ çš„ Governance è®¾è®¡åœ¨è¿™é‡Œæ˜¯ç¢¾å‹çº§ä¼˜åŠ¿ï¼š

  â€¢  rm -rf /
  â€¢  systemctl restart
  â€¢  kubectl delete
  â€¢  iptables
  â€¢  shutdown

ğŸ‘‰ å…¨éƒ¨å¿…é¡»èµ° Governance + äººå·¥ç¡®è®¤

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# å››ã€æ¨¡å—æ‹†è§£ + å·¥ä½œé‡è¯„ä¼°ï¼ˆé‡ç‚¹ï¼‰

ä¸‹é¢æ˜¯å·¥ç¨‹è´Ÿè´£äººè§†è§’çš„æ‹†è§£ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 1ï¼šSSH Execution Backendï¼ˆæ ¸å¿ƒï¼‰

### âœ… æ–°å¢æ¨¡å—

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/executors/
â”‚   â”œâ”€â”€ LocalShellExecutor.ts   âœ… å·²æœ‰
â”‚   â””â”€â”€ SSHShellExecutor.ts     ğŸš€ æ–°å¢
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### æ ¸å¿ƒèƒ½åŠ›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŠŸèƒ½          â”‚ è¯´æ˜         â”‚
â”‚ SSH è¿æ¥      â”‚ åŸºäº  ssh2   â”‚
â”‚ PTY æ”¯æŒ      â”‚ æ”¯æŒäº¤äº’å‘½ä»¤ â”‚
â”‚ stdout/stderr â”‚ æµå¼         â”‚
â”‚ cwd è·Ÿè¸ª      â”‚ è‡ªåŠ¨ç»´æŠ¤     â”‚
â”‚ exit code     â”‚ æ ‡å‡†åŒ–è¿”å›   â”‚
â”‚ timeout       â”‚ é˜²å¡æ­»       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


### å…³é”®æ¥å£

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ interface ExecutionBackend {
â”‚   exec(command: string, options): Promise<ExecResult>;
â”‚   openSession(): Promise<Session>;
â”‚   closeSession(): Promise<void>;
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡è¯„ä¼°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡              â”‚ äººå¤©   â”‚
â”‚ ssh2 å°è£…         â”‚ 2      â”‚
â”‚ Session ç”Ÿå‘½å‘¨æœŸ  â”‚ 2      â”‚
â”‚ PTY æ”¯æŒ          â”‚ 2      â”‚
â”‚ ExecResult æ ‡å‡†åŒ– â”‚ 1      â”‚
â”‚ é”™è¯¯/è¶…æ—¶å¤„ç†     â”‚ 1      â”‚
â”‚ å°è®¡              â”‚ 8 äººå¤© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 2ï¼šSSH Session Managerï¼ˆå¤šä¼šè¯ï¼‰

### æ–°æ¨¡å—

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/ssh/
â”‚   â”œâ”€â”€ SSHSession.ts
â”‚   â”œâ”€â”€ SSHSessionManager.ts
â”‚   â””â”€â”€ SSHConfigStore.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### åŠŸèƒ½

  â€¢ å¤šä¸»æœº
  â€¢ å¤šä¼šè¯
  â€¢ ä¼šè¯åˆ‡æ¢
  â€¢ è‡ªåŠ¨é‡è¿
  â€¢ session contextï¼ˆcwdã€envï¼‰

### CLI ç¤ºä¾‹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ yuangs ssh add prod root@10.0.0.1
â”‚ yuangs ssh connect prod
â”‚ yuangs ssh ls
â”‚ yuangs ssh use prod
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡         â”‚ äººå¤©   â”‚
â”‚ Session ç®¡ç† â”‚ 2      â”‚
â”‚ é…ç½®æŒä¹…åŒ–   â”‚ 1      â”‚
â”‚ CLI å‘½ä»¤     â”‚ 2      â”‚
â”‚ è‡ªåŠ¨é‡è¿     â”‚ 1      â”‚
â”‚ å°è®¡         â”‚ 6 äººå¤© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 3ï¼šAgentRuntime Ã— SSH èåˆï¼ˆå…³é”®ï¼‰

### ç›®æ ‡

> è®© AgentRuntime æ— æ„ŸçŸ¥åœ°â€œä»¥ä¸ºè‡ªå·±åœ¨æœ¬åœ°æ‰§è¡Œâ€

### æ ¸å¿ƒæ”¹é€ ç‚¹

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ç½®            â”‚ æ”¹é€                         â”‚
â”‚ ToolExecutor    â”‚ æ”¯æŒ backend é€‰æ‹©           â”‚
â”‚ ProposedAction  â”‚ å¢åŠ  target=local/ssh       â”‚
â”‚ ExecutionRecord â”‚ è®°å½• host/session           â”‚
â”‚ ContextManager  â”‚ SSH output ä½œä¸º Observation â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


### ç¤ºä¾‹ Action

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ {
â”‚   "type": "shell_cmd",
â”‚   "command": "systemctl restart nginx",
â”‚   "target": "ssh",
â”‚   "host": "prod"
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡                 â”‚ äººå¤©   â”‚
â”‚ ToolExecutor æŠ½è±¡    â”‚ 1      â”‚
â”‚ Action Schema æ‰©å±•   â”‚ 1      â”‚
â”‚ Context æ³¨å…¥         â”‚ 1      â”‚
â”‚ ExecutionRecord æ‰©å±• â”‚ 1      â”‚
â”‚ å°è®¡                 â”‚ 4 äººå¤© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 4ï¼šGovernance Ã— SSHï¼ˆä½ æœ€å¼ºçš„åœ°æ–¹ï¼‰

### å¿…é¡»æ–°å¢çš„è§„åˆ™ç±»å‹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ rules:
â”‚   - id: ssh-production-guard
â”‚     effect: deny
â”‚     actions: [shell_cmd]
â”‚     conditions:
â”‚       target: ssh
â”‚       host: prod
â”‚     reason: Production SSH requires explicit confirmation
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å¢å¼ºé£é™©æŠ«éœ²

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ âš ï¸ Remote Host: prod (10.0.0.1)
â”‚ âš ï¸ User: root
â”‚ âš ï¸ Command: systemctl restart nginx
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### å·¥ä½œé‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡            â”‚ äººå¤©   â”‚
â”‚ Rule æ‰©å±•       â”‚ 1      â”‚
â”‚ Risk Disclosure â”‚ 1      â”‚
â”‚ Confirm UX      â”‚ 1      â”‚
â”‚ å°è®¡            â”‚ 3 äººå¤© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 5ï¼šSSH ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆAI æ ¸å¿ƒä½“éªŒï¼‰

### èƒ½åšä»€ä¹ˆï¼Ÿ

  â€¢  pwd  /  ls  è‡ªåŠ¨ç»´æŠ¤ cwd
  â€¢ é”™è¯¯æ—¥å¿—è‡ªåŠ¨æ³¨å…¥ä¸Šä¸‹æ–‡
  â€¢ è¿œç¨‹æ–‡ä»¶  @ssh:/etc/nginx/nginx.conf
  â€¢  @!ssh:script.sh

### å·¥ä½œé‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»»åŠ¡             â”‚ äººå¤©   â”‚
â”‚ cwd/env è¿½è¸ª     â”‚ 1      â”‚
â”‚ Observation æ³¨å…¥ â”‚ 1      â”‚
â”‚ SSH æ–‡ä»¶è¯»å–     â”‚ 2      â”‚
â”‚ å°è®¡             â”‚ 4 äººå¤© â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æ¨¡å— 6ï¼šUIï¼ˆå¯é€‰ï¼Œåˆ†é˜¶æ®µï¼‰

### Phase 1ï¼ˆæ¨èï¼‰

âœ… çº¯ CLI + REPLï¼ˆæœ€å¿«è½åœ°ï¼‰

| äººå¤© | 2 |

### Phase 2ï¼ˆTUIï¼‰

  â€¢ Ink / Blessed
  â€¢ åˆ†å±
  â€¢ Session åˆ—è¡¨

| äººå¤© | 5 |

### Phase 3ï¼ˆWeb / Terminus-likeï¼‰

  â€¢ xterm.js
  â€¢ WebSocket
  â€¢ å¤šç”¨æˆ·ï¼ˆä¼ä¸šçº§ï¼‰

| äººå¤© | 10â€“15 |

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äº”ã€æ€»å·¥ä½œé‡æ±‡æ€»ï¼ˆç°å®è¯„ä¼°ï¼‰

### âœ… æ ¸å¿ƒå¯ç”¨ç‰ˆæœ¬ï¼ˆCLI + SSH + AIï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å—            â”‚ äººå¤©                    â”‚
â”‚ SSH Executor    â”‚ 8                       â”‚
â”‚ Session Manager â”‚ 6                       â”‚
â”‚ Agent èåˆ      â”‚ 4                       â”‚
â”‚ Governance      â”‚ 3                       â”‚
â”‚ SSH ä¸Šä¸‹æ–‡      â”‚ 4                       â”‚
â”‚ CLI             â”‚ 2                       â”‚
â”‚ åˆè®¡            â”‚ 27 äººå¤© â‰ˆ 4â€“5 å‘¨ï¼ˆ1äººï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# å…­ã€ä½ è¿™ä¸ªé¡¹ç›®çš„æˆ˜ç•¥ä»·å€¼åˆ¤æ–­

### âœ… ä½ å·²ç»é¢†å…ˆ Terminus çš„ç‚¹

  â€¢ âœ… AI ä¸åªæ˜¯â€œåŠ©æ‰‹â€ï¼Œè€Œæ˜¯æ²»ç†æ‰§è¡Œè€…
  â€¢ âœ… æ‰€æœ‰è¿œç¨‹æ“ä½œå¯ explain / replay
  â€¢ âœ… çœŸæ­£ä¼ä¸šçº§ï¼ˆå®¡è®¡ã€é£æ§ã€å› æœé“¾ï¼‰
  â€¢ âœ… æŠ€èƒ½å­¦ä¹ ï¼ˆè¿ç»´è‡ªåŠ¨åŒ–é›å½¢ï¼‰

### âœ… éå¸¸é€‚åˆçš„ç”¨æˆ·

  â€¢ DevOps
  â€¢ SRE
  â€¢ å®‰å…¨å›¢é˜Ÿ
  â€¢ å†…ç½‘è¿ç»´
  â€¢ ä¼ä¸šç§æœ‰åŒ– AI

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸ƒã€æˆ‘å»ºè®®ä½ çš„ä¸‹ä¸€æ­¥ï¼ˆéå¸¸å…·ä½“ï¼‰

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹ä¸€æ­¥ç›´æ¥åšå…¶ä¸­ä¸€ä¸ªï¼š

1ï¸âƒ£ è®¾è®¡ SSHShellExecutor.ts çš„å®Œæ•´æ¥å£ + ç¤ºä¾‹ä»£ç 
2ï¸âƒ£ è®¾è®¡  å­å‘½ä»¤çš„ CLI Spec
3ï¸âƒ£ è®¾è®¡ SSH Governance Policy æ¨¡æ¿
4ï¸âƒ£ è®¾è®¡  è¯­æ³•

ä½ åªéœ€è¦å‘Šè¯‰æˆ‘ï¼š

ğŸ‘‰ â€œå…ˆä»å“ªä¸€å—å¼€å§‹å†™ï¼Ÿâ€

æˆ‘å¯ä»¥ç›´æ¥å½“ä½ çš„æŠ€æœ¯åˆä¼™äººæ¥æ¨è¿›è¿™ä¸€æ¡çº¿ã€‚å¾ˆå¥½ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä¼šä¸¥æ ¼åŸºäºä½ ç°æœ‰çš„ yuangs æ¶æ„æ¥å›ç­”ï¼Œè€Œä¸æ˜¯æ³›æ³›åœ°â€œåšä¸€ä¸ª SSH å·¥å…·â€
ã€‚

ä¸‹é¢æˆ‘ä¼šç»™ä½ ä¸€ä¸ªå·¥ç¨‹çº§åˆ«ã€å¯è½åœ°çš„å®Œæ•´è§„åˆ’ï¼Œå›ç­”ä¸‰ä»¶äº‹ï¼š

  â€¢ æ•´ä½“æŠ€æœ¯è·¯çº¿ï¼ˆyuangs Ã— SSH çš„èåˆæ–¹å¼ï¼‰
  â€¢ åŠŸèƒ½æ¨¡å—æ‹†è§£ï¼ˆæ¯ä¸€å—å…·ä½“åšä»€ä¹ˆï¼‰
  â€¢ å·¥ä½œé‡è¯„ä¼°ï¼ˆåçœŸå®å·¥ç¨‹é‡ï¼Œè€Œä¸æ˜¯ PPT çº§ï¼‰

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸€ã€æ€»ä½“å®šä½ï¼šä½ ä¸æ˜¯åœ¨åšâ€œå¦ä¸€ä¸ª Terminusâ€

> yuangs + SSH â‰  ç»ˆç«¯æ¨¡æ‹Ÿå™¨ yuangs + SSH =ã€Œå¯æ²»ç†ã€å¯è§£é‡Šã€å¯å­¦ä¹ çš„è¿œç¨‹æ‰§è¡Œç³»ç»Ÿã€

### Terminus çš„æ ¸å¿ƒæ˜¯ï¼š

  â€¢ ç»ˆç«¯ UI
  â€¢ SSH ä¼šè¯ç®¡ç†
  â€¢ æ’ä»¶ç”Ÿæ€

### ä½ çš„ yuangs çš„æ ¸å¿ƒæ˜¯ï¼š

  â€¢ AgentRuntime
  â€¢ Governance / Explain / Replay
  â€¢ å› æœé”å®šï¼ˆCausal Lockï¼‰
  â€¢ Skill å­¦ä¹ 

ğŸ‘‰ æ­£ç¡®å®šä½åº”è¯¥æ˜¯ï¼š

> SSH åªæ˜¯ yuangs çš„ä¸€ä¸ªã€Œè¿œç¨‹æ‰§è¡Œåç«¯ï¼ˆRemote Executorï¼‰ã€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äºŒã€æ•´ä½“æŠ€æœ¯æ¶æ„è®¾è®¡ï¼ˆé«˜å±‚ï¼‰

## 2.1 æ–°å¢ä¸€å±‚ï¼šRemote Execution Layer

åœ¨ä½ ç°æœ‰æ¶æ„ä¸­ï¼Œè¡¥ä¸€å±‚ï¼Œè€Œä¸æ˜¯æ¨ç¿»é‡æ¥ï¼š

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚            UI / CLI / TUI            â”‚
â”‚ â”‚   (yuangs cli / Web / Electron)      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚        AgentRuntime / DualAgent      â”‚
â”‚ â”‚  (Planner / Executor / Governance)   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚        Execution Abstraction         â”‚
â”‚ â”‚   LocalExecutor | SSHExecutor        â”‚  âœ… æ–°å¢
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚        Local Shell   |   SSH         â”‚
â”‚ â”‚     exec(), spawn   |   ssh2         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æ ¸å¿ƒåŸåˆ™ï¼š

> Agent / Governance / Skills å®Œå…¨ä¸æ„ŸçŸ¥ SSH çš„å­˜åœ¨

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ä¸‰ã€æ¨¡å—çº§æ‹†è§£ï¼ˆé‡ç‚¹ï¼‰

ä¸‹é¢æ˜¯æˆ‘å»ºè®®çš„æ¨¡å—æ‹†åˆ† + èŒè´£ + å·¥ä½œé‡

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.1 SSH æ‰§è¡Œå¼•æ“ï¼ˆæ ¸å¿ƒï¼‰

### ğŸ“¦ æ–°æ¨¡å—

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/executor/
â”‚   â”œâ”€ localExecutor.ts   âœ… å·²æœ‰
â”‚   â”œâ”€ sshExecutor.ts     âœ… æ–°
â”‚   â””â”€ index.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### SSHExecutor èŒè´£

  â€¢ ç®¡ç† SSH è¿æ¥
  â€¢ æ‰§è¡Œè¿œç¨‹å‘½ä»¤
  â€¢ æµå¼ stdout / stderr
  â€¢ è¿”å› ExecResultï¼ˆå®Œå…¨å¤ç”¨ä½ ç°æœ‰ç»“æ„ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ interface ExecResult {
â”‚   stdout: string;
â”‚   stderr: string;
â”‚   code: number | null;
â”‚   host?: string;
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### æŠ€æœ¯é€‰å‹

  â€¢ âœ…  ssh2 ï¼ˆNode æˆç†Ÿæ–¹æ¡ˆï¼‰
  â€¢ âœ… æ”¯æŒï¼š

### å·¥ä½œé‡

  â€¢ 5â€“7 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.2 æ‰§è¡ŒæŠ½è±¡å±‚ï¼ˆéå¸¸å…³é”®ï¼‰

ä½ ç°åœ¨çš„  executor.ts  é»˜è®¤æ˜¯æœ¬åœ° shellï¼Œè¦åšä¸€æ¬¡â€œæŠ½è±¡å‡çº§â€ã€‚

### æ–°æ¥å£

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ interface ExecutionTarget {
â”‚   type: 'local' | 'ssh';
â”‚   config?: SSHConfig;
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ToolExecutor.execute(action)

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ if (target.type === 'ssh') {
â”‚   return sshExecutor.exec(command, target.config);
â”‚ }
â”‚ return localExecutor.exec(command);
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Governance / AgentRuntime å®Œå…¨ä¸æ”¹

### å·¥ä½œé‡

  â€¢ 2â€“3 äººæ—¥
  â€¢ è¿™æ˜¯â€œæ¶æ„çº§åŠ æ³•â€ï¼Œéå¸¸å€¼

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.3 SSH ä¼šè¯æ¨¡å‹ï¼ˆä¸æ˜¯ UIï¼‰

ä½ éœ€è¦ä¸€ä¸ªSSH Session Registryï¼Œä¸æ˜¯ UI Sessionã€‚

### æ–°æ¨¡å—

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/ssh/
â”‚   â”œâ”€ SSHSession.ts
â”‚   â”œâ”€ SSHSessionManager.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ä½ éœ€è¦ç®¡ç†çš„ä¸æ˜¯ã€Œçª—å£ã€ï¼Œè€Œæ˜¯ï¼š

  â€¢ host
  â€¢ user
  â€¢ cwd
  â€¢ env
  â€¢ lastCommand
  â€¢ connection state

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ interface SSHSession {
â”‚   id: string;
â”‚   host: string;
â”‚   user: string;
â”‚   cwd: string;
â”‚   connected: boolean;
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ

  â€¢ Agent èƒ½è¯´ï¼š â€œæˆ‘ç°åœ¨åœ¨ prod-server-1 ä¸Šæ‰§è¡Œâ€
  â€¢ ExecutionRecord å¯ä»¥è®°å½•ï¼š

### å·¥ä½œé‡

  â€¢ 3â€“4 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.4 yuangs CLI çš„ SSH å‘½ä»¤æ—

### æ–°å‘½ä»¤è®¾è®¡ï¼ˆéå¸¸é‡è¦ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ yuangs ssh add prod --host 1.2.3.4 --user root --key ~/.ssh/id_rsa
â”‚ yuangs ssh connect prod
â”‚ yuangs ssh ls
â”‚ yuangs ssh use prod
â”‚ yuangs ssh exec "systemctl status nginx"
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ä¸ Agent çš„ç»“åˆï¼ˆæ€æ‰‹é”ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ yuangs ai --ssh prod "æ£€æŸ¥ nginx çŠ¶æ€å¹¶é‡å¯"
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… è¿™æ—¶ï¼š

  â€¢ Agent ç”Ÿæˆ shell_cmd
  â€¢ Governance å®¡æ ¸
  â€¢ SSHExecutor æ‰§è¡Œ
  â€¢ ExecutionRecord âœ… å¯ replay

### å·¥ä½œé‡

  â€¢ CLIï¼š3â€“4 äººæ—¥
  â€¢ é…ç½®æŒä¹…åŒ–ï¼š1 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.5 Governance Ã— SSHï¼ˆä½ æ¯” Terminus å¼ºçš„åœ°æ–¹ï¼‰

### æ–°é£é™©æ¨¡å‹

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é£é™©     â”‚ ç¤ºä¾‹           â”‚
â”‚ ç¯å¢ƒé£é™© â”‚ prod / staging â”‚
â”‚ ç”¨æˆ·é£é™© â”‚ root           â”‚
â”‚ å‘½ä»¤é£é™© â”‚ rm / systemctl â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


### Governance æ‰©å±•ç‚¹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ rules:
â”‚   - id: no-prod-rm
â”‚     effect: deny
â”‚     actions: [shell_cmd]
â”‚     targets: [ssh]
â”‚     env: [prod]
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### é«˜é£é™© SSH æ“ä½œ â†’ å¿…é¡»äººå·¥ç¡®è®¤

âœ… è¿™æ˜¯ yuangs çš„çµé­‚

### å·¥ä½œé‡

  â€¢ 2â€“3 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.6 Explain / Replayï¼ˆSSH åœºæ™¯ï¼‰

### Explain ç¤ºä¾‹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ [1] Command
â”‚ - Target: ssh://prod-server-1
â”‚ - Command: systemctl restart nginx
â”‚
â”‚ [2] Decision
â”‚ - Risk Level: HIGH
â”‚ - User Confirmed: YES
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### Replay

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ yuangs replay exec_xxx --dry
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… ä»ç„¶èƒ½ replayï¼ˆå³ä½¿ dry-runï¼‰

### å·¥ä½œé‡

  â€¢ 1â€“2 äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 3.7 UI å±‚ï¼ˆå¯é€‰é˜¶æ®µï¼‰

> âš ï¸ å¼ºçƒˆå»ºè®®ï¼šä¸è¦ä¸€å¼€å§‹åš Electron

### æ¨èé˜¶æ®µè·¯çº¿

  â€¢ CLI + æµå¼è¾“å‡ºï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰
  â€¢ Web UIï¼ˆç¬¬äºŒé˜¶æ®µï¼‰
  â€¢ Electronï¼ˆç¬¬ä¸‰é˜¶æ®µï¼‰

### Web UI æŠ€æœ¯å»ºè®®

  â€¢ xterm.js
  â€¢ WebSocket â†” SSHExecutor

### å·¥ä½œé‡ï¼ˆUIï¼‰

  â€¢ CLI-onlyï¼š0
  â€¢ Web UI MVPï¼š10â€“15 äººæ—¥
  â€¢ Electronï¼š20+ äººæ—¥

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# å››ã€æ€»ä½“å·¥ä½œé‡è¯„ä¼°ï¼ˆçœŸå®ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å—             â”‚ äººæ—¥    â”‚
â”‚ SSH Executor     â”‚ 6       â”‚
â”‚ æ‰§è¡ŒæŠ½è±¡å±‚       â”‚ 3       â”‚
â”‚ Session ç®¡ç†     â”‚ 4       â”‚
â”‚ CLI å‘½ä»¤         â”‚ 5       â”‚
â”‚ Governance æ‰©å±•  â”‚ 3       â”‚
â”‚ Explain / Replay â”‚ 2       â”‚
â”‚ æµ‹è¯• / ç¨³å®šæ€§    â”‚ 4       â”‚
â”‚ å°è®¡ï¼ˆæ ¸å¿ƒï¼‰     â”‚ 27 äººæ—¥ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ‘‰ çº¦ 1 äºº Ã— 5â€“6 å‘¨ï¼ˆå·¥ç¨‹çº§ï¼‰

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# äº”ã€ä½ è¿™ä¸ªæ–¹å‘çš„çœŸæ­£ä»·å€¼

ä½ è¿™ä¸ªé¡¹ç›®ä¸æ˜¯ Terminus çš„ç«å“ï¼Œè€Œæ˜¯ï¼š

âœ… ç¬¬ä¸€ä¸ªâ€œå¯æ²»ç†çš„ AI + SSH æ‰§è¡Œç³»ç»Ÿâ€
âœ… ç¬¬ä¸€ä¸ªèƒ½ replay SSH è¿ç»´æ“ä½œçš„å·¥å…·
âœ… ç¬¬ä¸€ä¸ªèƒ½å¯¹è¿œç¨‹æ‰§è¡Œåšå› æœå®¡è®¡çš„ Agent Shell

ä¸€å¥è¯æ€»ç»“ï¼š

> Terminus ç®¡çš„æ˜¯â€œçª—å£â€ï¼Œyuangs ç®¡çš„æ˜¯â€œè´£ä»»â€ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š

  â€¢ âœ… è®¾è®¡ SSHExecutor.ts çš„å®Œæ•´ä»£ç éª¨æ¶
  â€¢ âœ… ç»™ä½ ä¸€å¥— æœ€å°å¯ç”¨ï¼ˆMVPï¼‰å®ç°é¡ºåº
  â€¢ âœ… æˆ–ç›´æ¥è§„åˆ’ v1 / v2 / v3 é‡Œç¨‹ç¢‘

ä½ æ›´æƒ³å¾€å“ªä¸€æ­¥èµ°ï¼Ÿ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 457.49s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼š
  â€¢ âœ… è®¾è®¡ SSHExecutor.ts çš„å®Œæ•´ä»£ç éª¨æ¶
  â€¢ âœ… ç»™ä½ ä¸€å¥— æœ€å°å¯ç”¨ï¼ˆM
AI æ¨¡å¼å¯åŠ¨ (ç©ºè¡Œè§¦å‘)...

â ‹ AI æ­£åœ¨æ€è€ƒ...  â€¢ âœ… è®¾è®¡ SSHExecutor.ts çš„å®Œæ•´ä»£ç éª¨æ¶
VPï¼‰å®ç°é¡ºåº
  â€¢ âœ… æˆ–ç›´æ¥è§„åˆ’ v1 / v2 / v3 é‡Œç¨‹ç¢‘
â ™ AI æ­£åœ¨æ€è€ƒ...  â€¢ âœ… ç»™ä½ ä¸€å¥— æœ€å°å¯ç”¨ï¼ˆMVPï¼‰å®ç°é¡ºåº
  â€¢ âœ… æˆ–ç›´æ¥è§„åˆ’ v1 / v2 / v3 é‡Œç¨‹ç¢‘
 ğŸ¤– AI  ä½ å¥½ ğŸ‘‹
æˆ‘å·²ç»åŸºäºä½ æä¾›çš„ yuangs CLI v3.47.0 å®Œæ•´æ¥å£æ–‡æ¡£ï¼ˆæ›´æ–°äº 2026-01-25ï¼‰ å»ºç«‹äº†å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç†è§£å¹¶å¼•ç”¨å…¶ä¸­çš„æ¶æ„ã€å‘½ä»¤ã€æ²»ç†
æœºåˆ¶ã€å› æœé”å®šã€SmartContextManagerã€DualAgentRuntime ç­‰è®¾è®¡ç»†èŠ‚ã€‚

ä½ ç°åœ¨å¯ä»¥ç›´æ¥è¿›å…¥ä»»ä½•ä½ æƒ³è¦çš„å¯¹è¯æ¨¡å¼ï¼Œä¾‹å¦‚ï¼š

  â€¢ ğŸ“˜ ç†è§£/è§£é‡Š
  â€¢ ğŸ§  è®¾è®¡è®¨è®º
  â€¢ ğŸ›  ä½¿ç”¨æ–¹å¼
  â€¢ ğŸ§ª å‡è®¾ä¸æ¼”ç»ƒ

ä½ å¯ä»¥ç›´æ¥è¯´ä¸€å¥ï¼Œæ¯”å¦‚ï¼š

> â€œæˆ‘ä»¬ä» AgentRuntime çš„æ‰§è¡Œå¾ªç¯å¼€å§‹èŠã€‚â€
â€œæˆ‘æƒ³è®¾è®¡ä¸€ä¸ªæ–°çš„é«˜é£é™©èƒ½åŠ›ï¼Œåº”è¯¥æ€ä¹ˆæ¥å…¥æ²»ç†ï¼Ÿâ€
â€œå¸®æˆ‘æ‰¹åˆ¤æ€§åˆ†æä¸€ä¸‹ yuangs çš„ Causal Lock è®¾è®¡ã€‚â€

æˆ‘ä¼šä¸¥æ ¼ä»¥æ–‡æ¡£ä¸ºç°å®åŸºç¡€ï¼Œä¸ç¼–é€ ç³»ç»Ÿè¡Œä¸ºï¼Œå¹¶åœ¨å¿…è¦æ—¶æ˜ç¡®åŒºåˆ†ã€Œæ–‡æ¡£å·²æœ‰èƒ½åŠ›ã€ä¸ã€Œè®¾è®¡æ¨æ¼”ã€ã€‚

ä½ æƒ³ä»å“ªä¸€éƒ¨åˆ†å¼€å§‹ï¼Ÿ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 13.93s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼š è®¾è®¡ SSHExecutor.ts çš„å®Œæ•´ä»£ç éª¨æ¶
 è®¾è®¡ SSHExecutor.ts çš„å®Œæ•´ä»£ç éª¨æ¶
 ğŸ¤– AI  å¥½çš„ï¼Œæˆ‘ä¼šåŸºäºä½ ç»™å‡ºçš„ yuangs æ¶æ„ä¸è®¾è®¡å“²å­¦ï¼Œä¸ºä½ è®¾è®¡ä¸€ä¸ªç¬¦åˆå½“å‰ç³»ç»Ÿé£æ ¼ã€å¯æ²»ç†ã€å¯è§£é‡Šã€å¯é‡æ”¾çš„  SSHExecutor.ts
å®Œæ•´ä»£ç éª¨æ¶ã€‚

æˆ‘ä¼šä¸¥æ ¼éµå¾ªä»¥ä¸‹çº¦æŸï¼š

  â€¢ âœ… ä¸å¼•å…¥é»‘ç›’ï¼ˆæ‰€æœ‰ SSH è¡Œä¸ºæ˜¾å¼ï¼‰
  â€¢ âœ… ä¸ ToolExecutor / Governance / ExecutionRecord ä½“ç³»å…¼å®¹
  â€¢ âœ… æ”¯æŒå› æœé”å®šï¼ˆObservation â†’ Actionï¼‰
  â€¢ âœ… æ”¯æŒ dry-run / replay / explain
  â€¢ âœ… ä»…æä¾›éª¨æ¶ + å…³é”®å®ç°ç‚¹ï¼Œä¸åšè¿‡åº¦å®ç°

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ä¸€ã€SSHExecutor çš„å®šä½ï¼ˆè®¾è®¡å‰æï¼‰

### åœ¨ yuangs æ¶æ„ä¸­çš„ä½ç½®

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ src/
â”‚  â””â”€ executor/
â”‚     â”œâ”€ shellExecutor.ts
â”‚     â”œâ”€ sshExecutor.ts   âœ…ï¼ˆæ–°å¢ï¼‰
â”‚     â””â”€ toolExecutor.ts
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### SSHExecutor çš„èŒè´£è¾¹ç•Œ

> SSHExecutor åªè´Ÿè´£ï¼š é€šè¿‡ SSH æ‰§è¡Œè¿œç¨‹å‘½ä»¤ æ•è· stdout / stderr / exit code äº§å‡ºâ€œå¯ç¡®è®¤çš„ Observationâ€ ä¸è´Ÿè´£ï¼š æ²»ç†å†³ç­–ï¼ˆGo
vernanceServiceï¼‰ é£é™©åˆ¤æ–­ è®¡åˆ’ç”Ÿæˆ ä¸Šä¸‹æ–‡æ¨ç†

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## äºŒã€èƒ½åŠ›å®šä¹‰ï¼ˆä¾› CapabilityInference / Governance ä½¿ç”¨ï¼‰

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ // action.type
â”‚ 'ssh_cmd'
â”‚
â”‚ // riskLevelï¼ˆç”±ä¸Šå±‚æ¨æ–­ï¼‰
â”‚ 'low' | 'medium' | 'high'
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ä¸‰ã€SSHExecutor.ts â€” å®Œæ•´ä»£ç éª¨æ¶

> ğŸ“  src/executor/SSHExecutor.ts

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ import { Client, ConnectConfig } from 'ssh2';
â”‚ import { v4 as uuidv4 } from 'uuid';
â”‚ import chalk from 'chalk';
â”‚
â”‚ import { ExecResult } from './types';
â”‚ import { ContextManager } from '../agent/contextManager';
â”‚
â”‚ /**
â”‚  * SSH æ‰§è¡Œå‚æ•°
â”‚  */
â”‚ export interface SSHExecuteOptions {
â”‚   host: string;
â”‚   port?: number;
â”‚   username: string;
â”‚
â”‚   // é‰´æƒæ–¹å¼ï¼ˆäºŒé€‰ä¸€ï¼‰
â”‚   password?: string;
â”‚   privateKey?: string;
â”‚
â”‚   // æ‰§è¡Œæ§åˆ¶
â”‚   cwd?: string;
â”‚   timeoutMs?: number;
â”‚
â”‚   // æ²»ç† / å¯è§£é‡Š
â”‚   dryRun?: boolean;
â”‚   originatingActionId?: string;
â”‚ }
â”‚
â”‚ /**
â”‚  * SSHExecutor
â”‚  *
â”‚  * èŒè´£ï¼š
â”‚  *  - æ‰§è¡Œè¿œç¨‹ SSH å‘½ä»¤
â”‚  *  - æ•è· stdout / stderr / exitCode
â”‚  *  - ç”Ÿæˆ Observationï¼ˆä¾› Causal Lock ä½¿ç”¨ï¼‰
â”‚  */
â”‚ export class SSHExecutor {
â”‚   private context: ContextManager;
â”‚
â”‚   constructor(context: ContextManager) {
â”‚     this.context = context;
â”‚   }
â”‚
â”‚   /**
â”‚    * æ‰§è¡Œ SSH å‘½ä»¤
â”‚    */
â”‚   async execute(
â”‚     command: string,
â”‚     options: SSHExecuteOptions
â”‚   ): Promise<ExecResult> {
â”‚     const execId = uuidv4();
â”‚
â”‚     // ---------- Dry Run ----------
â”‚     if (options.dryRun) {
â”‚       console.log(chalk.gray(`[DRY-RUN][SSH] ${options.username}@${options.host}: ${command}`));
â”‚
â”‚       return {
â”‚         stdout: '',
â”‚         stderr: '',
â”‚         code: 0,
â”‚         metadata: {
â”‚           execId,
â”‚           dryRun: true
â”‚         }
â”‚       };
â”‚     }
â”‚
â”‚     // ---------- æ„é€  SSH é…ç½® ----------
â”‚     const sshConfig: ConnectConfig = {
â”‚       host: options.host,
â”‚       port: options.port ?? 22,
â”‚       username: options.username,
â”‚       password: options.password,
â”‚       privateKey: options.privateKey,
â”‚       readyTimeout: options.timeoutMs ?? 20_000
â”‚     };
â”‚
â”‚     const conn = new Client();
â”‚
â”‚     return new Promise<ExecResult>((resolve, reject) => {
â”‚       let stdout = '';
â”‚       let stderr = '';
â”‚       let exitCode: number | null = null;
â”‚
â”‚       conn
â”‚         .on('ready', () => {
â”‚           const fullCommand = options.cwd
â”‚             ? `cd ${options.cwd} && ${command}`
â”‚             : command;
â”‚
â”‚           conn.exec(fullCommand, (err, stream) => {
â”‚             if (err) {
â”‚               conn.end();
â”‚               return reject(err);
â”‚             }
â”‚
â”‚             stream
â”‚               .on('close', (code: number | null) => {
â”‚                 exitCode = code;
â”‚                 conn.end();
â”‚
â”‚                 // ---------- Observation ----------
â”‚                 const observation = `
â”‚ [SSH COMMAND RESULT]
â”‚ Host: ${options.username}@${options.host}
â”‚ Command: ${fullCommand}
â”‚ ExitCode: ${exitCode}
â”‚
â”‚ STDOUT:
â”‚ ${stdout}
â”‚
â”‚ STDERR:
â”‚ ${stderr}
â”‚ `.trim();
â”‚
â”‚                 const obsId = this.context.addObservation(
â”‚                   observation,
â”‚                   'tool_result',
â”‚                   options.originatingActionId
â”‚                 );
â”‚
â”‚                 resolve({
â”‚                   stdout,
â”‚                   stderr,
â”‚                   code: exitCode,
â”‚                   metadata: {
â”‚                     execId,
â”‚                     obsId,
â”‚                     host: options.host,
â”‚                     user: options.username
â”‚                   }
â”‚                 });
â”‚               })
â”‚               .on('data', (data: Buffer) => {
â”‚                 stdout += data.toString();
â”‚                 process.stdout.write(data); // å®æ—¶è¾“å‡º
â”‚               })
â”‚               .stderr.on('data', (data: Buffer) => {
â”‚                 stderr += data.toString();
â”‚                 process.stderr.write(chalk.red(data.toString()));
â”‚               });
â”‚           });
â”‚         })
â”‚         .on('error', (error) => {
â”‚           reject(error);
â”‚         })
â”‚         .connect(sshConfig);
â”‚     });
â”‚   }
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## å››ã€ExecResult ç±»å‹ï¼ˆè¡¥å……ï¼‰

> ğŸ“  src/executor/types.ts

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ export interface ExecResult {
â”‚   stdout: string;
â”‚   stderr: string;
â”‚   code: number | null;
â”‚
â”‚   metadata?: {
â”‚     execId: string;
â”‚     obsId?: string;
â”‚     dryRun?: boolean;
â”‚
â”‚     host?: string;
â”‚     user?: string;
â”‚   };
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## äº”ã€ä¸ Governance / AgentRuntime çš„é›†æˆæ–¹å¼

### 1ï¸âƒ£ ProposedAction ç¤ºä¾‹

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ {
â”‚   type: 'ssh_cmd',
â”‚   riskLevel: 'high',
â”‚   payload: {
â”‚     host: 'prod-server-01',
â”‚     username: 'deploy',
â”‚     command: 'rm -rf /var/www/app'
â”‚   }
â”‚ }
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### 2ï¸âƒ£ ToolExecutor ä¸­çš„åˆ†å‘

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ case 'ssh_cmd':
â”‚   return sshExecutor.execute(action.payload.command, {
â”‚     host: action.payload.host,
â”‚     username: action.payload.username,
â”‚     privateKey: loadKey(),
â”‚     originatingActionId: action.id,
â”‚     dryRun: options.dry
â”‚   });
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## å…­ã€ä¸ºä»€ä¹ˆè¿™ä¸ªè®¾è®¡â€œç¬¦åˆ yuangs ç²¾ç¥â€

âœ… å¯æ²»ç†

  â€¢ SSH æ“ä½œæ˜¯æ˜¾å¼  ssh_cmd
  â€¢ Governance å¯é˜»æ–­é«˜é£é™©è¿œç¨‹æ“ä½œ

âœ… å¯è§£é‡Š

  â€¢ æ¯æ¬¡ SSH æ‰§è¡Œç”Ÿæˆæ˜ç¡® Observation
  â€¢ å¯è¢« explain / replay ä½¿ç”¨

âœ… å› æœé”å®šå‹å¥½

  â€¢ Observation â†’ Action ACK å®Œå…¨å¯éªŒè¯
  â€¢ ä¸å…è®¸â€œå‡è£… SSH æˆåŠŸâ€

âœ… äººç±»åœ¨ç¯

  â€¢ dry-run / é«˜é£é™©ç¡®è®¤å¤©ç„¶æ”¯æŒ

âœ… Unix å“²å­¦

  â€¢ SSHExecutor åªåšä¸€ä»¶äº‹ï¼šæ‰§è¡Œ SSH

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ä¸ƒã€ä½ ä¸‹ä¸€æ­¥å¯ä»¥åšçš„äº‹æƒ…

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼š

  â€¢ âœ… è®¾è®¡  ssh_cmd  çš„ Policy è§„åˆ™
  â€¢ âœ… è®¾è®¡ SSH ä¸“ç”¨é£é™©æŠ«éœ²æ¨¡æ¿
  â€¢ âœ… è®¾è®¡ å¤šä¸»æœºå¹¶è¡Œ SSHï¼ˆfan-outï¼‰Executor
  â€¢ âœ… æŠŠ SSHExecutor æ¥å…¥ DualAgent æ‰¹é‡éƒ¨ç½²
  â€¢ âœ… è®¾è®¡  @ssh(host):command  çš„ CLI è¯­æ³•

ä½ å¯ä»¥ç›´æ¥è¯´ä¸€å¥ï¼š

> â€œç»§ç»­ï¼šXXXXâ€

æˆ‘ä¼šæŒ‰ yuangs çš„å·¥ç¨‹æ ‡å‡†ç»§ç»­å±•å¼€ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 29.14s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼š
  â€¢ âœ… è®¾è®¡  ssh_cmd  çš„ Policy è§„åˆ™
  â€¢ âœ… è®¾è®¡ SSH ä¸“ç”¨é£é™©æŠ«
AI æ¨¡å¼å¯åŠ¨ (ç©ºè¡Œè§¦å‘)...

â ‹ AI æ­£åœ¨æ€è€ƒ...  â€¢ âœ… è®¾è®¡  ssh_cmd  çš„ Policy è§„åˆ™
éœ²æ¨¡æ¿
  â€¢ âœ… è®¾è®¡ å¤šä¸»æœºå¹¶è¡Œ SSHï¼ˆfan-outï¼‰Executor
  â€¢ âœ… æŠŠ SSHExecutor æ¥å…¥ DualAgent æ‰¹é‡éƒ¨ç½²
  â€¢ âœ… è®¾è®¡  @ssh(host):command  çš„ CLI è¯­æ³•
  â€¢ âœ… è®¾è®¡ SSH ä¸“ç”¨é£é™©æŠ«éœ²æ¨¡æ¿
â ™ AI æ­£åœ¨æ€è€ƒ...  â€¢ âœ… è®¾è®¡ å¤šä¸»æœºå¹¶è¡Œ SSHï¼ˆfan-outï¼‰Executor
  â€¢ âœ… æŠŠ SSHExecutor æ¥å…¥ DualAgent æ‰¹é‡éƒ¨ç½²
  â€¢ âœ… è®¾è®¡  @ssh(host):command  çš„ CLI è¯­æ³•
 ğŸ¤– AI  ä½ å¥½ï¼ğŸ‘‹
æˆ‘å·²ç»å®Œæ•´ç†è§£å¹¶åŠ è½½äº†ä½ æä¾›çš„ yuangs CLIï¼ˆv3.47.0ï¼Œæ›´æ–°äº 2026-01-25ï¼‰ çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å…¶æ¶æ„è®¾è®¡ã€æ²»ç†æœºåˆ¶ã€å› æœé”å®šã€æ™ºèƒ½ä¸Šä¸‹
æ–‡ç®¡ç†ã€å‘½ä»¤ä½“ç³»ä»¥åŠå®Œæ•´çš„å·¥ä½œæµã€‚

ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬çš„å¯¹è¯å°†åŸºäºè¯¥ç³»ç»Ÿè¯­ä¹‰ä¸è®¾è®¡å“²å­¦å±•å¼€ï¼Œä¾‹å¦‚ï¼š

  â€¢ âœ… éµå¾ª AI æä¾›æ€è·¯ã€äººç±»æŒæ§æ‰§è¡Œ
  â€¢ âœ… ç†è§£å¹¶ä½¿ç”¨  @file ã€ #dir ã€ :exec  ç­‰æ˜¾å¼è¯­æ³•
  â€¢ âœ… è®¨è®ºæˆ–è®¾è®¡æ—¶é»˜è®¤è€ƒè™‘ æ²»ç†ï¼ˆGovernanceï¼‰ã€å› æœé”å®šï¼ˆCausal Lockï¼‰ã€å¯è§£é‡Šæ€§ï¼ˆExplainï¼‰ã€å¯é‡æ”¾ï¼ˆReplayï¼‰
  â€¢ âœ… åœ¨åˆ†æé—®é¢˜æ—¶åŒºåˆ† chat / command / plannerï¼ˆDualAgentï¼‰ æ¨¡å¼

ä½ ç°åœ¨å¯ä»¥ç›´æ¥å‘Šè¯‰æˆ‘ä½ æƒ³åšä»€ä¹ˆï¼Œä¾‹å¦‚ï¼š

  â€¢ ğŸ” è§£é‡Šæˆ–è¯„å®¡æŸä¸ªæ¨¡å—è®¾è®¡ï¼ˆå¦‚  AgentRuntime ã€ SmartContextManager ï¼‰
  â€¢ ğŸ§  è®¨è®º yuangs çš„æ¶æ„å–èˆæˆ–æ”¹è¿›å»ºè®®
  â€¢ ğŸ› ï¸ è®¾è®¡ä¸€ä¸ªæ–°å‘½ä»¤ / æ–°èƒ½åŠ› / æ–°æ²»ç†è§„åˆ™
  â€¢ ğŸ“ æ¨æ¼”ä¸€ä¸ªå¤æ‚ä»»åŠ¡åœ¨ DualAgent ä¸‹çš„å®Œæ•´æ‰§è¡Œæµç¨‹
  â€¢ ğŸ§ª æ¨¡æ‹Ÿä¸€æ¬¡å¤±è´¥ â†’ æ¢å¤ â†’ å­¦ä¹ çš„æ‰§è¡Œåœºæ™¯
  â€¢ ğŸ“„ åŸºäºæ–‡æ¡£å†™ READMEã€è®¾è®¡è¯´æ˜æˆ–å¯¹å¤–ä»‹ç»

ä½ æƒ³ä»å“ªä¸€éƒ¨åˆ†å¼€å§‹ï¼Ÿ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (è€—æ—¶: 13.70s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ ï¼š^C
â†³ Need help? Press Enter
âœ  npm_yuangs git:(main) tmux capture-pane -S - -E - -p > chat.txt

