> ğŸ“… Generated by Yuangs Git Plan at 2026/1/28 18:21:48
> ğŸ¯ Context: ç»“åˆä¸Šä¸‹æ–‡å†…å®¹å’Œgitç›¸å…³åŠŸèƒ½ï¼Œè¿˜æœ‰å“ªäº›æœ‰ç”¨çš„gitç›¸å…³åŠŸèƒ½æ²¡æœ‰å®ç°æ•´åˆï¼Œè¯·è§„åˆ’ä¸€ä¸‹æœªæ¥è¦åšçš„åŠŸèƒ½

# todo.md

## [ç›®æ ‡]

- [ ] å°† Git èƒ½åŠ›ä½“ç³»ä»â€œå·¥å…·è°ƒç”¨â€å‡çº§ä¸º**å¯é…ç½®ã€å¯è§£é‡Šã€å¯å›é€€ã€å¯å®¡è®¡ã€å¯æ¼”è¿›**çš„å·¥ç¨‹ç³»ç»Ÿ
- [ ] æ‰€æœ‰æ™ºèƒ½è¡Œä¸ºå…·å¤‡**èƒ½åŠ›ç­‰çº§ã€ç½®ä¿¡åº¦ã€é™çº§è·¯å¾„ã€å®¡è®¡å…ƒæ•°æ®**
- [ ] é€šè¿‡**ä¸¥è‹›ä»£ç å®¡æŸ¥ + äº§å“éªŒæ”¶**åŒæ ‡å‡†
- [ ] ç¡®ä¿é»˜è®¤å®‰å…¨ã€é»˜è®¤ä¿å®ˆã€Pipeline First

---

## [æ–‡ä»¶å˜æ›´]

- [ ] `core/capability/CapabilityLevel.ts`
- [ ] `core/capability/DegradationPolicy.ts`
- [ ] `core/context/ContextMeta.ts`
- [ ] `git/GitStage.ts`
- [ ] `git/GitCommitParser.ts`
- [ ] `git/MergeIntentResolver.ts`
- [ ] `git/RiskyMergeDetector.ts`
- [ ] `git/SemanticDiffEngine.ts`
- [ ] `git/DiffSummary.ts`
- [ ] `git/HistoryAnalyzer.ts`
- [ ] `git/HotspotCalculator.ts`
- [ ] `git/EvolutionContext.ts`
- [ ] `pipeline/GitProtocol.ts`
- [ ] `pipeline/PipelineError.ts`
- [ ] `security/SecurityPolicy.ts`
- [ ] `security/RedactionConfig.ts`
- [ ] `config/PublicAPIRules.ts`
- [ ] `docs/audit-model.md`

---

## [è¯¦ç»†æ­¥éª¤]

### ä¸€ã€èƒ½åŠ›åˆ†çº§ä¸é™çº§æœºåˆ¶

- [ ] å®šä¹‰ `CapabilityLevel` æšä¸¾ï¼ˆSEMANTIC / STRUCTURAL / LINE / TEXTï¼‰
- [ ] å®ç° `DegradationPolicy` æ¥å£
- [ ] ä¸ºæ¯ä¸ª Git æ¨¡å—å£°æ˜èƒ½åŠ›ç­‰çº§ä¸ fallbackChain
- [ ] è®°å½•è§¦å‘é™çº§çš„å…·ä½“åŸå› ï¼ˆsize / timeout / parseFailure / confidence / securityï¼‰

---

### äºŒã€ç»Ÿä¸€ Context å…ƒæ•°æ®ï¼ˆå¼ºåˆ¶ï¼‰

- [ ] å®ç° `ContextMeta` ç»“æ„
- [ ] æ‰€æœ‰ Context è¾“å‡ºé™„å¸¦ï¼š
  - [ ] `confidence`
  - [ ] `confidenceReason`
  - [ ] `clipped.reason / droppedItems`
  - [ ] `provenance.source / ref / timeRange`
- [ ] å®¡è®¡å¯è¿½æº¯ï¼šä¸ºä»€ä¹ˆä¿ç•™ã€ä¸ºä»€ä¹ˆè£å‰ªã€å¯ä¿¡åº¦è¯´æ˜

---

### ä¸‰ã€Git Commit è¯­ä¹‰è§£æï¼ˆGitCommitParserï¼‰

#### 1. Commit Message åˆ†çº§è§£æ

- [ ] L1ï¼šè§„èŒƒ Commitï¼ˆConventional Commitsï¼‰
  - [ ] è§£æ type / scope / breaking
  - [ ] ç½®ä¿¡åº¦ 0.9~1.0
- [ ] L2ï¼šéæ ‡å‡† Commit
  - [ ] å…³é”®è¯ä¿¡å·åŒ¹é…
  - [ ] Diff ç‰¹å¾åˆ†æ
  - [ ] è¾“å‡º `InferenceTrace`
  - [ ] ç½®ä¿¡åº¦ 0.5~0.8
- [ ] L3ï¼šä¿¡æ¯ä¸è¶³
  - [ ] è¾“å‡º `UnknownIntent`
  - [ ] ä»…ä¿ç•™äº‹å®å‹æ–‡ä»¶å˜æ›´
  - [ ] ç½®ä¿¡åº¦ â‰¤0.4

---

#### 2. Merge Commit å¤„ç†

- [ ] å®ç° `MergeIntentSummary`
- [ ] å­æ„å›¾ä¸€è‡´æ—¶è‡ªåŠ¨èšåˆ
- [ ] å†²çªæ„å›¾è¾“å‡º `ConflictingMergeIntent`
- [ ] å®ç° `RiskyMergeDetector`
  - [ ] å†²çªæ–‡ä»¶æ•°
  - [ ] æ ¸å¿ƒæ¨¡å—
  - [ ] API + Schema åŒæ—¶å˜æ›´

---

#### 3. ç ´åæ€§å˜æ›´é£é™©è¯„ä¼°

- [ ] é…ç½® Public API è¯†åˆ«è§„åˆ™ï¼ˆè¯­è¨€ / æ³¨é‡Š / æ¨¡å—è¾¹ç•Œï¼‰
- [ ] é‡åŒ– risk levelï¼ˆhigh / potential / noneï¼‰
- [ ] æ¯ä¸ª level æ˜ç¡®åˆ—å‡ºè§¦å‘ signal

---

#### 4. ContextBuffer ç´¢å¼•ä¼˜åŒ–

- [ ] å®ç° `ContextKey`
- [ ] æ”¯æŒ path èšåˆ
- [ ] æ”¯æŒå»¶è¿Ÿå±•å¼€ï¼ˆå¤§ä»“åº“ï¼‰

---

#### 5. å®‰å…¨ç­–ç•¥

- [ ] å®ç° `SecurityPolicy.check()`
- [ ] æ•æ„Ÿä¿¡æ¯æ‰«æï¼ˆtoken / key / emailï¼‰
- [ ] è·¯å¾„éå†ä¸æ³¨å…¥é˜²æŠ¤
- [ ] è„±æ•è§„åˆ™å¯é…ç½®

---

### å››ã€ç»“æ„çº§ Diffï¼ˆSemanticDiffEngineï¼‰

- [ ] å¤šè¯­è¨€è§£æç­–ç•¥åˆ†çº§ï¼ˆAST / Regex / Textï¼‰
- [ ] Regex / Text æ ‡æ³¨ `Uncertain`
- [ ] åŠ¨æ€æ€§èƒ½é˜ˆå€¼æ§åˆ¶
- [ ] å®ç° `PerformanceFallback` è®°å½•
- [ ] æ˜ç¡® `DiffSummary` å®šä¹‰
  - [ ] modifiedAPIsï¼ˆä»…ç­¾åï¼‰
  - [ ] InternalChange æ ‡æ³¨
- [ ] ChangeRegion Detection
  - [ ] åŸºäº git hunk
  - [ ] é‚»è¿‘åˆå¹¶ï¼ˆÂ±N è¡Œï¼‰
  - [ ] å¤±è´¥åŸå› å¯è§£é‡Š

---

### äº”ã€Git å†å²æ¼”åŒ–åˆ†æ

- [ ] å®ç° Hotspot å…¬å¼ï¼ˆfreq + churn + recencyï¼‰
- [ ] æ”¯æŒæ¨¡å— / Symbol çº§åˆ«ç»Ÿè®¡
- [ ] å®ç°ä¾èµ–æ‰‡å‡ºå˜åŒ– `fanOutDelta`
- [ ] EvolutionContext é»˜è®¤ä»…ç»Ÿè®¡ä¿¡æ¯
- [ ] ä»£ç ç‰‡æ®µå±•ç¤ºé™åˆ¶ + è„±æ•

---

### å…­ã€Git Ã— Pipelineï¼ˆå®¡è®¡çº§ï¼‰

- [ ] å®šä¹‰ `git:` åè®®å‚æ•°ï¼ˆdiff / historyï¼‰
- [ ] æ˜ç¡®é»˜è®¤å€¼
- [ ] å®ç° `GitStage` æ¥å£
  - [ ] RepoStateï¼ˆæƒé™ / sizeProfileï¼‰
- [ ] ç»Ÿä¸€ `PipelineError` ç»“æ„
- [ ] é”™è¯¯ç­–ç•¥åˆ†çº§ï¼ˆå¯ä¸­æ–­ / å¯å¿½ç•¥ï¼‰
- [ ] å®‰å…¨æ²™ç®±
  - [ ] å‚æ•°ç™½åå•
  - [ ] ç¦æ­¢ shell æ‹¼æ¥
  - [ ] è·¯å¾„ canonicalize

---

### ä¸ƒã€Git Context æ™ºèƒ½æ³¨å…¥

- [ ] å®šä¹‰è§¦å‘å™¨ä¼˜å…ˆçº§ï¼ˆè·¯å¾„ / å‡½æ•° / NLUï¼‰
- [ ] å®ç°æƒé‡è®¡ç®— `impact`
- [ ] Token æ§åˆ¶ç­–ç•¥
  - [ ] drop low confidence
  - [ ] summarize
  - [ ] truncate
- [ ] ACL + PII + Repo Boundary æ ¡éªŒ

---

### å…«ã€å†³ç­–ç‚¹ä¸ Milestone å€™é€‰

- [ ] å®šä¹‰å€™é€‰æŒ‡æ ‡ï¼ˆæ–‡ä»¶æ¯”ä¾‹ / æŠ½è±¡å˜åŒ– / èšé›†åº¦ï¼‰
- [ ] å®ç° Milestone ç»“æ„åŒ– signals
- [ ] æä¾›â€œå¦‚ä½•ä½¿ç”¨å€™é€‰â€çš„æŒ‡å¯¼è¯´æ˜

---

### ä¹ã€ç‰ˆæœ¬è·¯çº¿å›¾æ‰§è¡Œ

- [ ] Phase 1ï¼ˆ5.40.0ï¼‰
  - [ ] GitStage
  - [ ] GitCommitParserï¼ˆL1~L3 + Mergeï¼‰
- [ ] Phase 2
  - [ ] Semantic Diffï¼ˆå«é™çº§ï¼‰
  - [ ] Context Resolver
- [ ] Phase 3
  - [ ] æ¼”åŒ–åˆ†æ
  - [ ] Milestone å€™é€‰ç³»ç»Ÿ

---